{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-product" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid"> {% if error_warning %}
    <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_form }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-product" class="form-horizontal">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-general" data-toggle="tab">{{ tab_general }}</a></li>
            <li><a href="#tab-data" data-toggle="tab">{{ tab_data }}</a></li>
            <li style="display:none"><a href="#tab-links" data-toggle="tab">{{ tab_links }}</a></li>
            <li style="display:none"><a href="#tab-attribute" data-toggle="tab">{{ tab_attribute }}</a></li>
            <li style="display:none"><a href="#tab-option" data-toggle="tab">{{ tab_option }}</a></li>
            <li style="display:none"><a href="#tab-recurring" data-toggle="tab">{{ tab_recurring }}</a></li>
            <li style="display:none"><a href="#tab-discount" data-toggle="tab">{{ tab_discount }}</a></li>
            <li style="display:none"><a href="#tab-special" data-toggle="tab">{{ tab_special }}</a></li>
            <li ><a href="#tab-image" data-toggle="tab">{{ tab_image }}</a></li>
            <li style="display:none"><a href="#tab-reward" data-toggle="tab">{{ tab_reward }}</a></li>
            <li><a href="#tab-seo" data-toggle="tab">{{ tab_seo }}</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-general">
              <ul class="nav nav-tabs" id="language">
                {% for language in languages %}
                <li><a href="#language{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
                {% endfor %}
              </ul>
              <input type="hidden" name="seo_score" class="seo_score" value="0">
              <input type="hidden" name="readability_score" class="readability_score" value="0">

              <div class="tab-content">{% for language in languages %}
                <div class="tab-pane" id="language{{ language.language_id }}">
                  <div class="form-group required">
                    <label class="col-sm-2 control-label" for="input-name{{ language.language_id }}">{{ entry_name }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="product_description[{{ language.language_id }}][name]" value="{{ product_description[language.language_id] ? product_description[language.language_id].name }}" placeholder="{{ entry_name }}" id="input-name{{ language.language_id }}" class="form-control name" />
                      {% if error_name[language.language_id] %}
                      <div class="text-danger">{{ error_name[language.language_id] }}</div>
                      {% endif %} </div>
                  </div>

                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-description{{ language.language_id }}">{{ entry_description }}</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][description]" placeholder="{{ entry_description }}" id="input-description{{ language.language_id }}" data-toggle="summernote" data-lang="{{ summernote }}" class="form-control product_description summernote">{{ product_description[language.language_id] ? product_description[language.language_id].description }}</textarea>

                      Total Words: <span id="description_words">0</span>
                    </div>
                  </div>

                  <div class="form-group required">
                    <label class="col-sm-2 control-label" for="input-meta-title{{ language.language_id }}">{{ entry_meta_title }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="product_description[{{ language.language_id }}][meta_title]" value="{{ product_description[language.language_id] ? product_description[language.language_id].meta_title }}" placeholder="{{ entry_meta_title }}" id="input-meta-title{{ language.language_id }}" class="form-control meta_title" />

                      Total Characters: <span id="meta_title_chars">0</span>

                      {% if error_meta_title[language.language_id] %}
                      <div class="text-danger">{{ error_meta_title[language.language_id] }}</div>
                      {% endif %} 

                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-meta-description{{ language.language_id }}">{{ entry_meta_description }}</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][meta_description]" rows="5" placeholder="{{ entry_meta_description }}" id="input-meta-description{{ language.language_id }}" class="form-control meta_description">{{ product_description[language.language_id] ? product_description[language.language_id].meta_description }}</textarea>

                      Total Characters: <span id="meta_description_chars">0</span>

                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-meta-keyword{{ language.language_id }}">{{ entry_meta_keyword }}</label>
                    <div class="col-sm-10">
                      <textarea name="product_description[{{ language.language_id }}][meta_keyword]" rows="5" placeholder="{{ entry_meta_keyword }}" id="input-meta-keyword{{ language.language_id }}" class="form-control">{{ product_description[language.language_id] ? product_description[language.language_id].meta_keyword }}</textarea>
                    </div>
                  </div>
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-tag{{ language.language_id }}"><span data-toggle="tooltip" title="{{ help_tag }}">{{ entry_tag }}</span></label>
                    <div class="col-sm-10">
                      <input type="text" name="product_description[{{ language.language_id }}][tag]" value="{{ product_description[language.language_id] ? product_description[language.language_id].tag }}" placeholder="{{ entry_tag }}" id="input-tag{{ language.language_id }}" class="form-control" />
                    </div>
                  </div>
                  <!-- focus keyphrase -->
                  <div class="form-group">
                    <label class="col-sm-2 control-label" for="input-focus-keyphrase{{ language.language_id }}">{{ text_focus_keyphrase }}</label>
                    <div class="col-sm-10">
                      <input type="hidden" name="focus_keyphrase" value="{{ product_description[language.language_id] ? product_description[language.language_id].focus_keyphrase }}" >

                      <input type="text" name="product_description[{{ language.language_id }}][focus_keyphrase]" value="{{ product_description[language.language_id] ? product_description[language.language_id].focus_keyphrase }}" placeholder="{{ text_focus_keyphrase }}" id="input-focus-keyphrase{{ language.language_id }}" class="form-control focus_keyphrase" />
                    </div>
                  </div>
                  
                </div>
                {% endfor %}</div>
            </div>
            <div class="tab-pane" id="tab-data" >
              <div class="form-group required" style="display:none">
                <label class="col-sm-2 control-label" for="input-model">{{ entry_model }}</label>
                <div class="col-sm-10">
                  <input type="text" name="model" value="{{ model }}" placeholder="{{ entry_model }}" id="input-model" class="form-control" />
                  {% if error_model %}
                  <div class="text-danger">{{ error_model }}</div>
                  {% endif %}</div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-sku"><span data-toggle="tooltip" title="{{ help_sku }}">{{ entry_sku }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="sku" value="{{ sku }}" placeholder="{{ entry_sku }}" id="input-sku" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-upc"><span data-toggle="tooltip" title="{{ help_upc }}">{{ entry_upc }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="upc" value="{{ upc }}" placeholder="{{ entry_upc }}" id="input-upc" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-ean"><span data-toggle="tooltip" title="{{ help_ean }}">{{ entry_ean }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="ean" value="{{ ean }}" placeholder="{{ entry_ean }}" id="input-ean" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-jan"><span data-toggle="tooltip" title="{{ help_jan }}">{{ entry_jan }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="jan" value="{{ jan }}" placeholder="{{ entry_jan }}" id="input-jan" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-isbn"><span data-toggle="tooltip" title="{{ help_isbn }}">{{ entry_isbn }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="isbn" value="{{ isbn }}" placeholder="{{ entry_isbn }}" id="input-isbn" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-mpn"><span data-toggle="tooltip" title="{{ help_mpn }}">{{ entry_mpn }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="mpn" value="{{ mpn }}" placeholder="{{ entry_mpn }}" id="input-mpn" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-location">{{ entry_location }}</label>
                <div class="col-sm-10">
                  <input type="text" name="location" value="{{ location }}" placeholder="{{ entry_location }}" id="input-location" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-price">{{ entry_price }}</label>
                <div class="col-sm-10">
                  <input type="text" name="price" value="{{ price }}" placeholder="{{ entry_price }}" id="input-price" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-tax-class">{{ entry_tax_class }}</label>
                <div class="col-sm-10">
                  <select name="tax_class_id" id="input-tax-class" class="form-control">
                    <option value="0">{{ text_none }}</option>
                    

                    {% for tax_class in tax_classes %}
                    {% if tax_class.tax_class_id == tax_class_id %}

                    
                    <option value="{{ tax_class.tax_class_id }}" selected="selected">{{ tax_class.title }}</option>
                    

                    {% else %}

                    
                    <option value="{{ tax_class.tax_class_id }}">{{ tax_class.title }}</option>
                    

                    {% endif %}
                    {% endfor %}

                  
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-quantity">{{ entry_quantity }}</label>
                <div class="col-sm-10">
                  <input type="text" name="quantity" value="{{ quantity }}" placeholder="{{ entry_quantity }}" id="input-quantity" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-minimum"><span data-toggle="tooltip" title="{{ help_minimum }}">{{ entry_minimum }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="minimum" value="{{ minimum }}" placeholder="{{ entry_minimum }}" id="input-minimum" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-subtract">{{ entry_subtract }}</label>
                <div class="col-sm-10">
                  <select name="subtract" id="input-subtract" class="form-control">
                    

                    {% if subtract %}

                    
                    <option value="1" selected="selected">{{ text_yes }}</option>
                    <option value="0">{{ text_no }}</option>
                    

                    {% else %}

                    
                    <option value="1">{{ text_yes }}</option>
                    <option value="0" selected="selected">{{ text_no }}</option>
                    

                    {% endif %}

                  
                  </select>
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-stock-status"><span data-toggle="tooltip" title="{{ help_stock_status }}">{{ entry_stock_status }}</span></label>
                <div class="col-sm-10">
                  <select name="stock_status_id" id="input-stock-status" class="form-control">
                    

                    {% for stock_status in stock_statuses %}
                    {% if stock_status.stock_status_id == stock_status_id %}

                    
                    <option value="{{ stock_status.stock_status_id }}" selected="selected">{{ stock_status.name }}</option>
                    

                    {% else %}

                    
                    <option value="{{ stock_status.stock_status_id }}">{{ stock_status.name }}</option>
                    

                    {% endif %}
                    {% endfor %}

                  
                  </select>
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label">{{ entry_shipping }}</label>
                <div class="col-sm-10">
                  <label class="radio-inline"> {% if shipping %}
                    <input type="radio" name="shipping" value="1" checked="checked" />
                    {{ text_yes }}
                    {% else %}
                    <input type="radio" name="shipping" value="1" />
                    {{ text_yes }}
                    {% endif %} </label>
                  <label class="radio-inline"> {% if not shipping %}
                    <input type="radio" name="shipping" value="0" checked="checked" />
                    {{ text_no }}
                    {% else %}
                    <input type="radio" name="shipping" value="0" />
                    {{ text_no }}
                    {% endif %} </label>
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-date-available">{{ entry_date_available }}</label>
                <div class="col-sm-3">
                  <div class="input-group date">
                    <input type="text" name="date_available" value="{{ date_available }}" placeholder="{{ entry_date_available }}" data-date-format="YYYY-MM-DD" id="input-date-available" class="form-control" />
                    <span class="input-group-btn">
                    <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                    </span></div>
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-length">{{ entry_dimension }}</label>
                <div class="col-sm-10">
                  <div class="row">
                    <div class="col-sm-4">
                      <input type="text" name="length" value="{{ length }}" placeholder="{{ entry_length }}" id="input-length" class="form-control" />
                    </div>
                    <div class="col-sm-4">
                      <input type="text" name="width" value="{{ width }}" placeholder="{{ entry_width }}" id="input-width" class="form-control" />
                    </div>
                    <div class="col-sm-4">
                      <input type="text" name="height" value="{{ height }}" placeholder="{{ entry_height }}" id="input-height" class="form-control" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-length-class">{{ entry_length_class }}</label>
                <div class="col-sm-10">
                  <select name="length_class_id" id="input-length-class" class="form-control">
                    

                    {% for length_class in length_classes %}
                    {% if length_class.length_class_id == length_class_id %}

                    
                    <option value="{{ length_class.length_class_id }}" selected="selected">{{ length_class.title }}</option>
                    

                    {% else %}

                    
                    <option value="{{ length_class.length_class_id }}">{{ length_class.title }}</option>
                    

                    {% endif %}
                    {% endfor %}

                  
                  </select>
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-weight">{{ entry_weight }}</label>
                <div class="col-sm-10">
                  <input type="text" name="weight" value="{{ weight }}" placeholder="{{ entry_weight }}" id="input-weight" class="form-control" />
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-weight-class">{{ entry_weight_class }}</label>
                <div class="col-sm-10">
                  <select name="weight_class_id" id="input-weight-class" class="form-control">
                    

                    {% for weight_class in weight_classes %}
                    {% if weight_class.weight_class_id == weight_class_id %}

                    
                    <option value="{{ weight_class.weight_class_id }}" selected="selected">{{ weight_class.title }}</option>
                    

                    {% else %}

                    
                    <option value="{{ weight_class.weight_class_id }}">{{ weight_class.title }}</option>
                    

                    {% endif %}
                    {% endfor %}

                  
                  </select>
                </div>
              </div>
              <div class="form-group" >
                <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
                <div class="col-sm-10">
                  <select name="status" id="input-status" class="form-control">
                    

                    {% if status %}

                    
                    <option value="1" selected="selected">{{ text_enabled }}</option>
                    <option value="0">{{ text_disabled }}</option>
                    

                    {% else %}

                    
                    <option value="1">{{ text_enabled }}</option>
                    <option value="0" selected="selected">{{ text_disabled }}</option>
                    

                    {% endif %}

                  
                  </select>
                </div>
              </div>
              <div class="form-group" style="display:none">
                <label class="col-sm-2 control-label" for="input-sort-order">{{ entry_sort_order }}</label>
                <div class="col-sm-10">
                  <input type="text" name="sort_order" value="{{ sort_order }}" placeholder="{{ entry_sort_order }}" id="input-sort-order" class="form-control" />
                </div>
              </div>
            </div>
            <div class="tab-pane" id="tab-links" style="display:none">
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-manufacturer"><span data-toggle="tooltip" title="{{ help_manufacturer }}">{{ entry_manufacturer }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="manufacturer" value="{{ manufacturer }}" placeholder="{{ entry_manufacturer }}" id="input-manufacturer" class="form-control" />
                  <input type="hidden" name="manufacturer_id" value="{{ manufacturer_id }}" />
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-category"><span data-toggle="tooltip" title="{{ help_category }}">{{ entry_category }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="category" value="" placeholder="{{ entry_category }}" id="input-category" class="form-control" />
                  <div id="product-category" class="well well-sm" style="height: 150px; overflow: auto;"> {% for product_category in product_categories %}
                    <div id="product-category{{ product_category.category_id }}"><i class="fa fa-minus-circle"></i> {{ product_category.name }}
                      <input type="hidden" name="product_category[]" value="{{ product_category.category_id }}" />
                    </div>
                    {% endfor %}</div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-filter"><span data-toggle="tooltip" title="{{ help_filter }}">{{ entry_filter }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="filter" value="" placeholder="{{ entry_filter }}" id="input-filter" class="form-control" />
                  <div id="product-filter" class="well well-sm" style="height: 150px; overflow: auto;"> {% for product_filter in product_filters %}
                    <div id="product-filter{{ product_filter.filter_id }}"><i class="fa fa-minus-circle"></i> {{ product_filter.name }}
                      <input type="hidden" name="product_filter[]" value="{{ product_filter.filter_id }}" />
                    </div>
                    {% endfor %}</div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label">{{ entry_store }}</label>
                <div class="col-sm-10">
                  <div class="well well-sm" style="height: 150px; overflow: auto;"> {% for store in stores %}
                    <div class="checkbox">
                      <label> {% if store.store_id in product_store %}
                        <input type="checkbox" name="product_store[]" value="{{ store.store_id }}" checked="checked" />
                        {{ store.name }}
                        {% else %}
                        <input type="checkbox" name="product_store[]" value="{{ store.store_id }}" />
                        {{ store.name }}
                        {% endif %} </label>
                    </div>
                    {% endfor %}</div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-download"><span data-toggle="tooltip" title="{{ help_download }}">{{ entry_download }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="download" value="" placeholder="{{ entry_download }}" id="input-download" class="form-control" />
                  <div id="product-download" class="well well-sm" style="height: 150px; overflow: auto;"> {% for product_download in product_downloads %}
                    <div id="product-download{{ product_download.download_id }}"><i class="fa fa-minus-circle"></i> {{ product_download.name }}
                      <input type="hidden" name="product_download[]" value="{{ product_download.download_id }}" />
                    </div>
                    {% endfor %}</div>
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-related"><span data-toggle="tooltip" title="{{ help_related }}">{{ entry_related }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="related" value="" placeholder="{{ entry_related }}" id="input-related" class="form-control" />
                  <div id="product-related" class="well well-sm" style="height: 150px; overflow: auto;"> {% for product_related in product_relateds %}
                    <div id="product-related{{ product_related.product_id }}"><i class="fa fa-minus-circle"></i> {{ product_related.name }}
                      <input type="hidden" name="product_related[]" value="{{ product_related.product_id }}" />
                    </div>
                    {% endfor %}</div>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="tab-attribute" style="display:none">
              <div class="table-responsive">
                <table id="attribute" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_attribute }}</td>
                      <td class="text-left">{{ entry_text }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                  
                  {% set attribute_row = 0 %}
                  {% for product_attribute in product_attributes %}
                  <tr id="attribute-row{{ attribute_row }}">
                    <td class="text-left" style="width: 40%;"><input type="text" name="product_attribute[{{ attribute_row }}][name]" value="{{ product_attribute.name }}" placeholder="{{ entry_attribute }}" class="form-control" />
                      <input type="hidden" name="product_attribute[{{ attribute_row }}][attribute_id]" value="{{ product_attribute.attribute_id }}" /></td>
                    <td class="text-left">{% for language in languages %}
                      <div class="input-group"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span>
                        <textarea name="product_attribute[{{ attribute_row }}][product_attribute_description][{{ language.language_id }}][text]" rows="5" placeholder="{{ entry_text }}" class="form-control">{{ product_attribute.product_attribute_description[language.language_id] ? product_attribute.product_attribute_description[language.language_id].text }}</textarea>
                      </div>
                      {% endfor %}</td>
                    <td class="text-right"><button type="button" onclick="$('#attribute-row{{ attribute_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set attribute_row = attribute_row + 1 %}
                  {% endfor %}
                    </tbody>
                  
                  <tfoot>
                    <tr>
                      <td colspan="2"></td>
                      <td class="text-right"><button type="button" onclick="addAttribute();" data-toggle="tooltip" title="{{ button_attribute_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-option" style="display:none">
              <div class="row">
                <div class="col-sm-2">
                  <ul class="nav nav-pills nav-stacked" id="option">
                    {% set option_row = 0 %}
                    {% for product_option in product_options %}
                    <li><a href="#tab-option{{ option_row }}" data-toggle="tab"><i class="fa fa-minus-circle" onclick="$('a[href=\'#tab-option{{ option_row }}\']').parent().remove(); $('#tab-option{{ option_row }}').remove(); $('#option a:first').tab('show');"></i> {{ product_option.name }}</a></li>
                    {% set option_row = option_row + 1 %}
                    {% endfor %}
                    <li>
                      <input type="text" name="option" value="" placeholder="{{ entry_option }}" id="input-option" class="form-control" />
                    </li>
                  </ul>
                </div>
                <div class="col-sm-10">
                  <div class="tab-content"> {% set option_row = 0 %}
                    {% set option_value_row = 0 %}
                    {% for product_option in product_options %}
                    <div class="tab-pane" id="tab-option{{ option_row }}">
                      <input type="hidden" name="product_option[{{ option_row }}][product_option_id]" value="{{ product_option.product_option_id }}" />
                      <input type="hidden" name="product_option[{{ option_row }}][name]" value="{{ product_option.name }}" />
                      <input type="hidden" name="product_option[{{ option_row }}][option_id]" value="{{ product_option.option_id }}" />
                      <input type="hidden" name="product_option[{{ option_row }}][type]" value="{{ product_option.type }}" />
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-required{{ option_row }}">{{ entry_required }}</label>
                        <div class="col-sm-10">
                          <select name="product_option[{{ option_row }}][required]" id="input-required{{ option_row }}" class="form-control">
                            

                            {% if product_option.required %}

                            
                            <option value="1" selected="selected">{{ text_yes }}</option>
                            <option value="0">{{ text_no }}</option>
                            

                            {% else %}

                            
                            <option value="1">{{ text_yes }}</option>
                            <option value="0" selected="selected">{{ text_no }}</option>
                            

                            {% endif %}

                          
                          </select>
                        </div>
                      </div>
                      {% if product_option.type == 'text' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control" />
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'textarea' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <textarea name="product_option[{{ option_row }}][value]" rows="5" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control">{{ product_option.value }}</textarea>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'file' %}
                      <div class="form-group" style="display: none;">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" id="input-value{{ option_row }}" class="form-control" />
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'date' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-3">
                          <div class="input-group date">
                            <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD" id="input-value{{ option_row }}" class="form-control" />
                            <span class="input-group-btn">
                            <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                            </span></div>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'time' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <div class="input-group time">
                            <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" data-date-format="HH:mm" id="input-value{{ option_row }}" class="form-control" />
                            <span class="input-group-btn">
                            <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                            </span></div>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'datetime' %}
                      <div class="form-group">
                        <label class="col-sm-2 control-label" for="input-value{{ option_row }}">{{ entry_option_value }}</label>
                        <div class="col-sm-10">
                          <div class="input-group datetime">
                            <input type="text" name="product_option[{{ option_row }}][value]" value="{{ product_option.value }}" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-value{{ option_row }}" class="form-control" />
                            <span class="input-group-btn">
                            <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                            </span></div>
                        </div>
                      </div>
                      {% endif %}
                      {% if product_option.type == 'select' or product_option.type == 'radio' or product_option.type == 'checkbox' or product_option.type == 'image' %}
                      <div class="table-responsive">
                        <table id="option-value{{ option_row }}" class="table table-striped table-bordered table-hover">
                          <thead>
                            <tr>
                              <td class="text-left">{{ entry_option_value }}</td>
                              <td class="text-right">{{ entry_quantity }}</td>
                              <td class="text-left">{{ entry_subtract }}</td>
                              <td class="text-right">{{ entry_price }}</td>
                              <td class="text-right">{{ entry_option_points }}</td>
                              <td class="text-right">{{ entry_weight }}</td>
                              <td></td>
                            </tr>
                          </thead>
                          <tbody>
                          
                          {% for product_option_value in product_option.product_option_value %}
                          <tr id="option-value-row{{ option_value_row }}">
                            <td class="text-left"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][option_value_id]" class="form-control">
                                

                                  {% if option_values[product_option.option_id] %}

                                  {% for option_value in option_values[product_option.option_id] %}

                                  {% if option_value.option_value_id == product_option_value.option_value_id %}

                                
                                <option value="{{ option_value.option_value_id }}" selected="selected">{{ option_value.name }}</option>
                                

                                  {% else %}

                                
                                <option value="{{ option_value.option_value_id }}">{{ option_value.name }}</option>
                                

                                  {% endif %}
                                  {% endfor %}
                                  {% endif %}

                              
                              </select>
                              <input type="hidden" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][product_option_value_id]" value="{{ product_option_value.product_option_value_id }}" /></td>
                            <td class="text-right"><input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][quantity]" value="{{ product_option_value.quantity }}" placeholder="{{ entry_quantity }}" class="form-control" /></td>
                            <td class="text-left"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][subtract]" class="form-control">
                                

                                  {% if product_option_value.subtract %}

                                
                                <option value="1" selected="selected">{{ text_yes }}</option>
                                <option value="0">{{ text_no }}</option>
                                

                                  {% else %}

                                
                                <option value="1">{{ text_yes }}</option>
                                <option value="0" selected="selected">{{ text_no }}</option>
                                

                                  {% endif %}

                              
                              </select></td>
                            <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price_prefix]" class="form-control">
                                

                                  {% if product_option_value.price_prefix == '+' %}

                                
                                <option value="+" selected="selected">+</option>
                                

                                  {% else %}

                                
                                <option value="+">+</option>
                                

                                  {% endif %}
                                  {% if product_option_value.price_prefix == '-' %}

                                
                                <option value="-" selected="selected">-</option>
                                

                                  {% else %}

                                
                                <option value="-">-</option>
                                

                                  {% endif %}

                              
                              </select>
                              <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][price]" value="{{ product_option_value.price }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                            <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points_prefix]" class="form-control">
                                

                                  {% if product_option_value.points_prefix == '+' %}

                                
                                <option value="+" selected="selected">+</option>
                                

                                  {% else %}

                                
                                <option value="+">+</option>
                                

                                  {% endif %}
                                  {% if product_option_value.points_prefix == '-' %}

                                
                                <option value="-" selected="selected">-</option>
                                

                                  {% else %}

                                
                                <option value="-">-</option>
                                

                                  {% endif %}

                              
                              </select>
                              <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][points]" value="{{ product_option_value.points }}" placeholder="{{ entry_points }}" class="form-control" /></td>
                            <td class="text-right"><select name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight_prefix]" class="form-control">
                                

                                  {% if product_option_value.weight_prefix == '+' %}

                                
                                <option value="+" selected="selected">+</option>
                                

                                  {% else %}

                                
                                <option value="+">+</option>
                                

                                  {% endif %}
                                  {% if product_option_value.weight_prefix == '-' %}

                                
                                <option value="-" selected="selected">-</option>
                                

                                  {% else %}

                                
                                <option value="-">-</option>
                                

                                  {% endif %}

                              
                              </select>
                              <input type="text" name="product_option[{{ option_row }}][product_option_value][{{ option_value_row }}][weight]" value="{{ product_option_value.weight }}" placeholder="{{ entry_weight }}" class="form-control" /></td>
                            <td class="text-right"><button type="button" onclick="$(this).tooltip('destroy');$('#option-value-row{{ option_value_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                          </tr>
                          {% set option_value_row = option_value_row + 1 %}
                          {% endfor %}
                            </tbody>
                          
                          <tfoot>
                            <tr>
                              <td colspan="6"></td>
                              <td class="text-left"><button type="button" onclick="addOptionValue('{{ option_row }}');" data-toggle="tooltip" title="{{ button_option_value_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                            </tr>
                          </tfoot>
                        </table>
                      </div>
                      <select id="option-values{{ option_row }}" style="display: none;">
                        

                        {% if option_values[product_option.option_id] %}
                        {% for option_value in option_values[product_option.option_id] %}

                        
                        <option value="{{ option_value.option_value_id }}">{{ option_value.name }}</option>
                        

                        {% endfor %}
                        {% endif %}

                      
                      </select>
                      {% endif %} </div>
                    {% set option_row = option_row + 1 %}
                    {% endfor %} </div>
                </div>
              </div>
            </div>
            <div class="tab-pane" id="tab-recurring" style="display:none">
              <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_recurring }}</td>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-left"></td>
                    </tr>
                  </thead>
                  <tbody>
                  
                  {% set recurring_row = 0 %}
                  {% for product_recurring in product_recurrings %}
                  <tr id="recurring-row{{ recurring_row }}">
                    <td class="text-left"><select name="product_recurring[{{ recurring_row }}][recurring_id]" class="form-control">
                        

                          {% for recurring in recurrings %}
                          {% if recurring.recurring_id == product_recurring.recurring_id %}

                        
                        <option value="{{ recurring.recurring_id }}" selected="selected">{{ recurring.name }}</option>
                        

                          {% else %}

                        
                        <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
                        

                          {% endif %}
                          {% endfor %}

                      
                      </select></td>
                    <td class="text-left"><select name="product_recurring[{{ recurring_row }}][customer_group_id]" class="form-control">
                        

                          {% for customer_group in customer_groups %}
                          {% if customer_group.customer_group_id == product_recurring.customer_group_id %}

                        
                        <option value="{{ customer_group.customer_group_id }}" selected="selected">{{ customer_group.name }}</option>
                        

                          {% else %}

                        
                        <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
                        

                          {% endif %}
                          {% endfor %}

                      
                      </select></td>
                    <td class="text-left"><button type="button" onclick="$('#recurring-row{{ recurring_row }}').remove()" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set recurring_row = recurring_row + 1 %}
                  {% endfor %}
                    </tbody>
                  
                  <tfoot>
                    <tr>
                      <td colspan="2"></td>
                      <td class="text-left"><button type="button" onclick="addRecurring()" data-toggle="tooltip" title="{{ button_recurring_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-discount" style="display:none">
              <div class="table-responsive">
                <table id="discount" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-right">{{ entry_quantity }}</td>
                      <td class="text-right">{{ entry_priority }}</td>
                      <td class="text-right">{{ entry_price }}</td>
                      <td class="text-left">{{ entry_date_start }}</td>
                      <td class="text-left">{{ entry_date_end }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                  
                  {% set discount_row = 0 %}
                  {% for product_discount in product_discounts %}
                  <tr id="discount-row{{ discount_row }}">
                    <td class="text-left"><select name="product_discount[{{ discount_row }}][customer_group_id]" class="form-control">
                        {% for customer_group in customer_groups %}
                        {% if customer_group.customer_group_id == product_discount.customer_group_id %}
                        <option value="{{ customer_group.customer_group_id }}" selected="selected">{{ customer_group.name }}</option>
                        {% else %}
                        <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
                        {% endif %}
                        {% endfor %}
                      </select></td>
                    <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][quantity]" value="{{ product_discount.quantity }}" placeholder="{{ entry_quantity }}" class="form-control" /></td>
                    <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][priority]" value="{{ product_discount.priority }}" placeholder="{{ entry_priority }}" class="form-control" /></td>
                    <td class="text-right"><input type="text" name="product_discount[{{ discount_row }}][price]" value="{{ product_discount.price }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                    <td class="text-left" style="width: 20%;"><div class="input-group date">
                        <input type="text" name="product_discount[{{ discount_row }}][date_start]" value="{{ product_discount.date_start }}" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div></td>
                    <td class="text-left" style="width: 20%;"><div class="input-group date">
                        <input type="text" name="product_discount[{{ discount_row }}][date_end]" value="{{ product_discount.date_end }}" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div></td>
                    <td class="text-left"><button type="button" onclick="$('#discount-row{{ discount_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set discount_row = discount_row + 1 %}
                  {% endfor %}
                    </tbody>
                  
                  <tfoot>
                    <tr>
                      <td colspan="6"></td>
                      <td class="text-left"><button type="button" onclick="addDiscount();" data-toggle="tooltip" title="{{ button_discount_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-special" style="display:none">
              <div class="table-responsive">
                <table id="special" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-right">{{ entry_priority }}</td>
                      <td class="text-right">{{ entry_price }}</td>
                      <td class="text-left">{{ entry_date_start }}</td>
                      <td class="text-left">{{ entry_date_end }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                  
                  {% set special_row = 0 %}
                  {% for product_special in product_specials %}
                  <tr id="special-row{{ special_row }}">
                    <td class="text-left"><select name="product_special[{{ special_row }}][customer_group_id]" class="form-control">
                        

                          {% for customer_group in customer_groups %}
                          {% if customer_group.customer_group_id == product_special.customer_group_id %}

                        
                        <option value="{{ customer_group.customer_group_id }}" selected="selected">{{ customer_group.name }}</option>
                        

                          {% else %}

                        
                        <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>
                        

                          {% endif %}
                          {% endfor %}

                      
                      </select></td>
                    <td class="text-right"><input type="text" name="product_special[{{ special_row }}][priority]" value="{{ product_special.priority }}" placeholder="{{ entry_priority }}" class="form-control" /></td>
                    <td class="text-right"><input type="text" name="product_special[{{ special_row }}][price]" value="{{ product_special.price }}" placeholder="{{ entry_price }}" class="form-control" /></td>
                    <td class="text-left" style="width: 20%;"><div class="input-group date">
                        <input type="text" name="product_special[{{ special_row }}][date_start]" value="{{ product_special.date_start }}" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div></td>
                    <td class="text-left" style="width: 20%;"><div class="input-group date">
                        <input type="text" name="product_special[{{ special_row }}][date_end]" value="{{ product_special.date_end }}" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" />
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                        </span></div></td>
                    <td class="text-left"><button type="button" onclick="$('#special-row{{ special_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set special_row = special_row + 1 %}
                  {% endfor %}
                    </tbody>
                  
                  <tfoot>
                    <tr>
                      <td colspan="5"></td>
                      <td class="text-left"><button type="button" onclick="addSpecial();" data-toggle="tooltip" title="{{ button_special_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-image">
              <div class="table-responsive">
                 <table class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left" style="width:15%">{{ entry_image }}</td>
                      <td class="text-left">{{ entry_image_custom_title }}</td>
                      <td class="text-left">{{ entry_image_custom_alt }}</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-left"><a href="" id="thumb-image" data-toggle="image" class="img-thumbnail"><img src="{{ thumb }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
                        <input type="hidden" name="image" value="{{ image }}" id="input-image" /></td>

                      <td ><input type="text" name="image_custom_title" value="{{ image_custom_title }}" placeholder="{{ entry_image_custom_title }}"  class="form-control image_custom_title" /></td>
                      <td><input type="text" name="image_custom_alt" value="{{ image_custom_alt }}" placeholder="{{ entry_image_custom_alt }}"  class="form-control image_custom_alt" /></td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="table-responsive">
                <table id="images" class="table table-striped table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left" style="width:15%">{{ entry_additional_image }}</td>
                      <td class="text-left">{{ entry_image_custom_title }}</td>
                      <td class="text-left">{{ entry_image_custom_alt }}</td>
                      <td class="text-right" style="width:10%">{{ entry_sort_order }}</td>
                      <td></td>
                    </tr>
                  </thead>
                  <tbody>
                  
                  {% set image_row = 0 %}
                  {% for product_image in product_images %}
                  <tr id="image-row{{ image_row }}">
                    <td class="text-left" ><a href="" id="thumb-image{{ image_row }}" data-toggle="image" class="img-thumbnail"><img src="{{ product_image.thumb }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a>
                      <input type="hidden" name="product_image[{{ image_row }}][image]" value="{{ product_image.image }}" class="additional-image"  id="input-image{{ image_row }}" /></td>

                    <td><input type="text" name="product_image[{{ image_row }}][image_custom_title]" value="{{ product_image.image_custom_title }}" placeholder="{{ entry_image_custom_title }}" class="form-control additional_image_custom_title" /></td>
                    
                    <td><input type="text" name="product_image[{{ image_row }}][image_custom_alt]" value="{{ product_image.image_custom_alt }}" placeholder="{{ entry_image_custom_alt }}" class="form-control additional_image_custom_alt" /></td>

                    <td class="text-right"><input type="text" name="product_image[{{ image_row }}][sort_order]" value="{{ product_image.sort_order }}" placeholder="{{ entry_sort_order }}" class="form-control" /></td>
                    <td class="text-left"><button type="button" onclick="$('#image-row{{ image_row }}').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set image_row = image_row + 1 %}
                  {% endfor %}
                    </tbody>
                  
                  <tfoot>
                    <tr>
                      <td colspan="4"></td>
                      <td class="text-left"><button type="button" onclick="addImage();" data-toggle="tooltip" title="{{ button_image_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-reward" style="display:none">
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-points"><span data-toggle="tooltip" title="{{ help_points }}">{{ entry_points }}</span></label>
                <div class="col-sm-10">
                  <input type="text" name="points" value="{{ points }}" placeholder="{{ entry_points }}" id="input-points" class="form-control" />
                </div>
              </div>
              <div class="table-responsive">
                <table class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_customer_group }}</td>
                      <td class="text-right">{{ entry_reward }}</td>
                    </tr>
                  </thead>
                  <tbody>
                  
                  {% for customer_group in customer_groups %}
                  <tr>
                    <td class="text-left">{{ customer_group.name }}</td>
                    <td class="text-right"><input type="text" name="product_reward[{{ customer_group.customer_group_id }}][points]" value="{{ product_reward[customer_group.customer_group_id] ? product_reward[customer_group.customer_group_id].points }}" class="form-control" /></td>
                  </tr>
                  {% endfor %}
                    </tbody>
                  
                </table>
              </div>
            </div>
            <div class="tab-pane" id="tab-seo">
              <div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ text_keyword }}</div>            
              <div class="table-responsive">
                <table class="table table-bordered table-hover">
                  <thead>
                    <tr>
                      <td class="text-left">{{ entry_store }}</td>
          <td class="text-left">{{ entry_keyword }}</td>
                    </tr>
                  </thead>
                  <tbody>
                  {% for store in stores %}
                  <tr>
                    <td class="text-left">{{ store.name }}</td>
                    <td class="text-left">{% for language in languages %}
                      <div class="input-group"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span>
                        <input type="text" name="product_seo_url[{{ store.store_id }}][{{ language.language_id }}]" value="{% if product_seo_url[store.store_id][language.language_id] %}{{ product_seo_url[store.store_id][language.language_id] }}{% endif %}" placeholder="{{ entry_keyword }}" class="form-control seo_url" />
                      </div>
                      {% if error_keyword[store.store_id][language.language_id] %}
                      <div class="text-danger">{{ error_keyword[store.store_id][language.language_id] }}</div>
                      {% endif %} 
                      {% endfor %}</td>
                  </tr>
                  {% endfor %}
                    </tbody>
                  
                </table>
              </div>
            </div>
            
          </div>
        </form>
      </div>
    </div>

    <!-- Product SEO -->
    <div class="panel-group">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" href="#seo_panel">{{ product_seo_text }}<span class="pull-right"><i class="fa fa-angle-down fa-lg"></i></span></a>
          </h4>
        </div>
        <div id="seo_panel" class="panel-collapse collapse in">
          <div class="panel-body">
            <!-- seo tabs -->
            <ul class="nav nav-tabs">
              <li class="active"><a data-toggle="tab" href="#keyphrase_panel"  class="keyphrase_panel"><i class="fa fa-circle "></i> {{ text_focus_keyphrase }}</a></li>
              <li><a data-toggle="tab" href="#readability_panel" class="readability_panel"><i class="fa fa-circle "></i> {{ text_readability }}</a></li>
            </ul>
            <!-- seo messages -->
            <div class="tab-content">
              <div id="readability_panel" class="tab-pane fade in">
                <!-- Readability Analysis -->
                <div class="panel-group">
                  <div class="panel panel-default">
                    
                    <div id="readability_panel" class="panel-collapse collapse in">
                      <div class="panel-body">
                        <!-- Readability Problems -->
                        <div class="panel panel-danger">
                          <div class="panel-heading">
                            <h4 class="panel-title">
                              <a data-toggle="collapse" href="#readability_problems">{{ text_problems }} (<span id="readability_problems_items"></span>) <i class="fa fa-angle-down fa-lg pull-right"></i> </a>
                            </h4>
                          </div>
                          <div id="readability_problems" class="panel-collapse collapse in">
                            <div class="panel-body">
                              <ul class="list-group" id="readability_problems_list">
                               <li class="list-group-item" id="subheading_problem"><i class="fa fa-circle text-danger"></i> {{ subheading_problem }}</li> <li class="list-group-item" id="no_transition_words_problem"><i class="fa fa-circle text-danger"></i> {{ no_transition_words_problem }}</li>
                                <li class="list-group-item" id="subheading_distribution_problem"><i class="fa fa-circle text-danger"></i> {{ subheading_distribution_problem }}</li>
                                <li class="list-group-item" id="paragraph_length_problem"><i class="fa fa-circle text-danger"></i> {{ paragraph_length_problem }}</li>
                                <li class="list-group-item" id="ease_reading_problem"><i class="fa fa-circle text-danger"></i> {{ ease_reading_problem }}</li>
                              </ul>
                            </div>
                          </div>
                        </div>
                       
                        <!-- Readability Improvments -->
                        <div class="panel panel-warning">
                          <div class="panel-heading">
                            <h4 class="panel-title">
                              <a data-toggle="collapse" href="#readability_improvements">{{ text_improvements }} (<span id="readability_improvements_items"></span>) <i class="fa fa-angle-down fa-lg pull-right"></i> </a>
                            </h4>
                          </div>
                          <div id="readability_improvements" class="panel-collapse collapse in">
                            <div class="panel-body">
                              <ul class="list-group" id="readability_improvements_list">
                                <li class="list-group-item" id="sentence_length_improvement"><i class="fa fa-circle text-warning"></i> {{ sentence_length_improvement }}</li>
                                <li class="list-group-item" id="ease_reading_improvement"><i class="fa fa-circle text-warning"></i> {{ ease_reading_improvement }}</li>
                              </ul>
                            </div>
                          </div>
                        </div>
                        
                        <!-- Readability Good Results -->
                       <div class="panel panel-success">
                          <div class="panel-heading">
                            <h4 class="panel-title">
                              <a data-toggle="collapse" href="#readability_good">{{ text_good_results }} (<span id="readability_good_items"></span>) <i class="fa fa-angle-down fa-lg pull-right"></i> </a>
                            </h4>
                          </div>
                          <div id="readability_good" class="panel-collapse collapse in">
                            <div class="panel-body">
                              <ul class="list-group" id="readability_good_list">
                                <li class="list-group-item" id="ease_reading_good"><i class="fa fa-circle text-success"></i> {{ ease_reading_good }}</li>
                                <li class="list-group-item" id="subheading_good"><i class="fa fa-circle text-success"></i> {{ subheading_good }}</li>
                                <li class="list-group-item" id="paragraph_length_good"><i class="fa fa-circle text-success"></i> {{ paragraph_length_good }}</li>
                                <li class="list-group-item" id="sentence_length_good"><i class="fa fa-circle text-success"></i> {{ sentence_length_good }}</li>
                                <li class="list-group-item" id="transition_words_good"><i class="fa fa-circle text-success"></i> {{ transition_words_good }}</li>
                              </ul>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div id="keyphrase_panel" class="tab-pane fade in active">
                 <!-- Focus Keyphrase -->
                <div class="panel-group">
                  <div class="panel panel-default">
                    <div id="keyphrase_panel2" class="panel-collapse collapse in">
                      <div class="panel-body">
                        <!-- Focus Keyphrase Problems -->
                        <div class="panel panel-danger">
                          <div class="panel-heading">
                            <h4 class="panel-title">
                              <a data-toggle="collapse" href="#keyphrase_problems">{{ text_problems }} (<span id="keyphrase_problems_items"></span>) <i class="fa fa-angle-down fa-lg pull-right"></i> </a>
                            </h4>
                          </div>
                          <div id="keyphrase_problems" class="panel-collapse collapse in">
                            <div class="panel-body" >
                              <ul class="list-group" id="keyphrase_problems_list" >
                                <li class="list-group-item" id="no_description_problem"><i class="fa fa-circle text-danger"></i> {{ no_description_problem }}</li> 
                                <li class="list-group-item" id="no_image_problem"><i class="fa fa-circle text-danger"></i> {{ no_image_problem }}</li>
                                <li class="list-group-item" id="internal_link_problem" style="display:block;"><i class="fa fa-circle text-danger"></i> {{ internal_link_problem }}</li>
                                <li class="list-group-item" id="outbound_link_problem"><i class="fa fa-circle text-danger"></i> {{ outbound_link_problem }}</li>
                                <li class="list-group-item" id="keyphrase_length_problem"><i class="fa fa-circle text-danger"></i> {{ keyphrase_length_problem }}</li>
                                <li class="list-group-item" id="keyphrase_over_density_problem"><i class="fa fa-circle text-danger"></i> {{ keyphrase_over_density_problem }}</li>
                                <li class="list-group-item" id="meta_description_length_problem"><i class="fa fa-circle text-danger"></i> {{ meta_description_length_problem }}</li>
                                <li class="list-group-item" id="meta_description_length_over_problem"><i class="fa fa-circle text-danger"></i> {{ meta_description_length_over_problem }}</li>
                                <li class="list-group-item" id="keyphrase_in_meta_description_problem"><i class="fa fa-circle text-danger"></i> {{ keyphrase_in_meta_description_problem }}</li>
                                <li class="list-group-item" id="no_meta_title_problem"><i class="fa fa-circle text-danger"></i> {{ no_meta_title_problem }}</li>
                                <li class="list-group-item" id="meta_title_width_problem"><i class="fa fa-circle text-danger"></i> {{ meta_title_width_problem }}</li>
                                <li class="list-group-item" id="keyphrase_not_in_title_problem"><i class="fa fa-circle text-danger"></i> {{ keyphrase_not_in_title_problem }}</li>
                                <li class="list-group-item" id="no_slug_problem"><i class="fa fa-circle text-danger"></i> {{ no_slug_problem }}</li>
                                <li class="list-group-item" id="keyphrase_in_slug_problem"><i class="fa fa-circle text-danger"></i> {{ keyphrase_in_slug_problem }}</li>
                                <li class="list-group-item" id="h1_tag_problem"><i class="fa fa-circle text-danger"></i> {{ h1_tag_problem }}</li>
                              </ul>
                            </div>
                          </div>
                        </div>
                       
                        <!-- Focus Keyphrase Improvments -->
                        <div class="panel panel-warning">
                          <div class="panel-heading">
                            <h4 class="panel-title">
                              <a data-toggle="collapse" href="#keyphrase_improvements">{{ text_improvements }} (<span id="keyphrase_improvements_items"></span>) <i class="fa fa-angle-down fa-lg pull-right"></i> </a>
                            </h4>
                          </div>
                          <div id="keyphrase_improvements" class="panel-collapse collapse in">
                            <div class="panel-body">
                              <ul class="list-group" id="keyphrase_improvements_list">
                                <li class="list-group-item" id="image_title_improvement"><i class="fa fa-circle text-warning"></i> {{ image_title_improvement }}</li>
                                <li class="list-group-item" id="image_alt_improvement"><i class="fa fa-circle text-warning"></i> {{ image_alt_improvement }}</li>
                                <li class="list-group-item" id="no_image_title_improvement"><i class="fa fa-circle text-warning"></i> {{ no_image_title_improvement }}</li>
                                <li class="list-group-item" id="no_image_alt_improvement"><i class="fa fa-circle text-warning"></i> {{ no_image_alt_improvement }}</li>
                                <li class="list-group-item" id="no_additional_image_title_improvement"><i class="fa fa-circle text-warning"></i> {{ no_additional_image_title_improvement }}</li>
                                <li class="list-group-item" id="no_additional_image_alt_improvement"><i class="fa fa-circle text-warning"></i> {{ no_additional_image_alt_improvement }}</li>
                                <li class="list-group-item" id="additional_image_title_improvement"><i class="fa fa-circle text-warning"></i> {{ additional_image_title_improvement }}</li>
                                <li class="list-group-item" id="additional_image_alt_improvement"><i class="fa fa-circle text-warning"></i> {{ additional_image_alt_improvement }}</li>
                                <li class="list-group-item" id="meta_title_width_improvement"><i class="fa fa-circle text-warning"></i> {{ meta_title_width_improvement }}</li>
                                <li class="list-group-item" id="keyphrase_in_slug_improvement"><i class="fa fa-circle text-warning"></i> {{ keyphrase_in_slug_improvement }}</li>
                                <li class="list-group-item" id="keyphrase_in_title_improvement"><i class="fa fa-circle text-warning"></i> {{ keyphrase_in_title_improvement }}</li>
                                <li class="list-group-item" id="meta_description_length_under_improvement"><i class="fa fa-circle text-warning"></i> {{ meta_description_length_under_improvement }}</li>
                                <li class="list-group-item" id="meta_description_length_over_improvement"><i class="fa fa-circle text-warning"></i> {{ meta_description_length_over_improvement }}</li>
                                <li class="list-group-item" id="description_far_below_length_improvement"><i class="fa fa-circle text-warning"></i> {{ description_far_below_length_improvement }}</li>
                                <li class="list-group-item" id="description_below_length_improvement"><i class="fa fa-circle text-warning"></i> {{ description_below_length_improvement }}</li>
                                <li class="list-group-item" id="description_slight_below_length_improvement"><i class="fa fa-circle text-warning"></i> {{ description_slight_below_length_improvement }}</li>
                                <li class="list-group-item" id="keyphrase_length_improvement"><i class="fa fa-circle text-warning"></i> {{ keyphrase_length_improvement }}</li>
                                <li class="list-group-item" id="no_previous_keyphrase_improvement"><i class="fa fa-circle text-warning"></i> {{ no_previous_keyphrase_improvement }}</li>
                                <li class="list-group-item" id="h1_tag_improvement"><i class="fa fa-circle text-warning"></i> {{ h1_tag_improvement }}</li>
                                <li class="list-group-item" id="subheading_tag_improvement"><i class="fa fa-circle text-warning"></i> {{ subheading_tag_improvement }}</li>
                                <li class="list-group-item" id="keyphrase_low_density_improvement"><i class="fa fa-circle text-warning"></i> {{ keyphrase_low_density_improvement }}</li>
                                <li class="list-group-item" id="keyphrase_in_intro_improvement"><i class="fa fa-circle text-warning"></i> {{ keyphrase_in_intro_improvement }}</li>
                              </ul>
                            </div>
                          </div>
                        </div>
                        
                        <!-- Focus Keyphrase Good Results -->
                       <div class="panel panel-success">
                          <div class="panel-heading">
                            <h4 class="panel-title">
                              <a data-toggle="collapse" href="#keyphrase_good"> {{ text_good_results }} (<span id="keyphrase_good_items"></span>) <i class="fa fa-angle-down fa-lg pull-right"></i></a>
                            </h4>
                          </div>
                          <div id="keyphrase_good" class="panel-collapse collapse in">
                            <div class="panel-body">
                              <ul class="list-group" id="keyphrase_good_list">
                                <li class="list-group-item" id="slug_good"><i class="fa fa-circle text-success"></i> {{ slug_good }}</li>
                                <li class="list-group-item" id="outbound_link_good"><i class="fa fa-circle text-success"></i> {{ outbound_link_good }}</li>
                                <li class="list-group-item" id="internal_link_good"><i class="fa fa-circle text-success"></i> {{ internal_link_good }}</li>
                                <li class="list-group-item" id="keyphrase_in_intro_good"><i class="fa fa-circle text-success"></i> {{ keyphrase_in_intro_good }}</li>
                                <li class="list-group-item" id="keyphrase_in_meta_description_good"><i class="fa fa-circle text-success"></i> {{ keyphrase_in_meta_description_good }}</li>
                                <li class="list-group-item" id="keyphrase_length_good"><i class="fa fa-circle text-success"></i> {{ keyphrase_length_good }}</li>
                                <li class="list-group-item" id="meta_title_width_good"><i class="fa fa-circle text-success"></i> {{ meta_title_width_good }}</li>
                                <li class="list-group-item" id="meta_description_length_good"><i class="fa fa-circle text-success"></i> {{ meta_description_length_good }}</li>
                                <li class="list-group-item" id="no_previous_keyphrase_good"><i class="fa fa-circle text-success"></i> {{ no_previous_keyphrase_good }}</li>
                                <li class="list-group-item" id="keyphrase_exact_in_title_good"><i class="fa fa-circle text-success"></i> {{ keyphrase_exact_in_title_good }}</li>
                                <li class="list-group-item" id="keyphrase_density_good"><i class="fa fa-circle text-success"></i> {{ keyphrase_density_good }}</li>
                                <li class="list-group-item" id="keyphrase_in_slug_good"><i class="fa fa-circle text-success"></i> {{ keyphrase_in_slug_good }}</li>
                                <li class="list-group-item" id="description_length_good"><i class="fa fa-circle text-success"></i> {{ description_length_good }}</li>
                                <li class="list-group-item" id="image_alt_good"><i class="fa fa-circle text-success"></i> {{ image_alt_good }}</li>
                                <li class="list-group-item" id="image_title_good"><i class="fa fa-circle text-success"></i> {{ image_title_good }}</li>
                                <li class="list-group-item" id="additional_image_alt_good"><i class="fa fa-circle text-success"></i> {{ additional_image_alt_good }}</li>
                                <li class="list-group-item" id="additional_image_title_good"><i class="fa fa-circle text-success"></i> {{ additional_image_title_good }}</li>
                                <li class="list-group-item" id="h1_tag_good"><i class="fa fa-circle text-success"></i> {{ h1_tag_good }}</li>
                                <li class="list-group-item" id="subheading_tag_good"><i class="fa fa-circle text-success"></i> {{ subheading_tag_good }}</li>
                              </ul>
                            </div>
                          </div>
                        </div>

                        <ul id="focus_keyphrases" style="display:none">
                          {% for focus_keyphrase in focus_keyphrases %}
                            <li >{{ focus_keyphrase.focus_keyphrase }}</li>
                          {% endfor %}
                        </ul>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <link href="view/javascript/codemirror/lib/codemirror.css" rel="stylesheet" />
  <link href="view/javascript/codemirror/theme/monokai.css" rel="stylesheet" />
  <script type="text/javascript" src="view/javascript/codemirror/lib/codemirror.js"></script> 
  <script type="text/javascript" src="view/javascript/codemirror/lib/xml.js"></script> 
  <script type="text/javascript" src="view/javascript/codemirror/lib/formatting.js"></script> 
  <script type="text/javascript" src="view/javascript/summernote/summernote.js"></script>
  <link href="view/javascript/summernote/summernote.css" rel="stylesheet" />
  <script type="text/javascript" src="view/javascript/summernote/summernote-image-attributes.js"></script> 
  <script type="text/javascript" src="view/javascript/summernote/opencart.js"></script> 
  <script type="text/javascript"><!--
// Manufacturer
$('input[name=\'manufacturer\']').autocomplete({
  'source': function(request, response) {
    $.ajax({
      url: 'index.php?route=catalog/manufacturer/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        json.unshift({
          manufacturer_id: 0,
          name: '{{ text_none }}'
        });

        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['manufacturer_id']
          }
        }));
      }
    });
  },
  'select': function(item) {
    $('input[name=\'manufacturer\']').val(item['label']);
    $('input[name=\'manufacturer_id\']').val(item['value']);
  }
});

// Category
$('input[name=\'category\']').autocomplete({
  'source': function(request, response) {
    $.ajax({
      url: 'index.php?route=catalog/category/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['category_id']
          }
        }));
      }
    });
  },
  'select': function(item) {
    $('input[name=\'category\']').val('');

    $('#product-category' + item['value']).remove();

    $('#product-category').append('<div id="product-category' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_category[]" value="' + item['value'] + '" /></div>');
  }
});

$('#product-category').delegate('.fa-minus-circle', 'click', function() {
  $(this).parent().remove();
});

// Filter
$('input[name=\'filter\']').autocomplete({
  'source': function(request, response) {
    $.ajax({
      url: 'index.php?route=catalog/filter/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['filter_id']
          }
        }));
      }
    });
  },
  'select': function(item) {
    $('input[name=\'filter\']').val('');

    $('#product-filter' + item['value']).remove();

    $('#product-filter').append('<div id="product-filter' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_filter[]" value="' + item['value'] + '" /></div>');
  }
});

$('#product-filter').delegate('.fa-minus-circle', 'click', function() {
  $(this).parent().remove();
});

// Downloads
$('input[name=\'download\']').autocomplete({
  'source': function(request, response) {
    $.ajax({
      url: 'index.php?route=catalog/download/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['download_id']
          }
        }));
      }
    });
  },
  'select': function(item) {
    $('input[name=\'download\']').val('');

    $('#product-download' + item['value']).remove();

    $('#product-download').append('<div id="product-download' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_download[]" value="' + item['value'] + '" /></div>');
  }
});

$('#product-download').delegate('.fa-minus-circle', 'click', function() {
  $(this).parent().remove();
});

// Related
$('input[name=\'related\']').autocomplete({
  'source': function(request, response) {
    $.ajax({
      url: 'index.php?route=catalog/product/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            label: item['name'],
            value: item['product_id']
          }
        }));
      }
    });
  },
  'select': function(item) {
    $('input[name=\'related\']').val('');

    $('#product-related' + item['value']).remove();

    $('#product-related').append('<div id="product-related' + item['value'] + '"><i class="fa fa-minus-circle"></i> ' + item['label'] + '<input type="hidden" name="product_related[]" value="' + item['value'] + '" /></div>');
  }
});

$('#product-related').delegate('.fa-minus-circle', 'click', function() {
  $(this).parent().remove();
});
//--></script> 
  <script type="text/javascript"><!--
var attribute_row = {{ attribute_row }};

function addAttribute() {
    html  = '<tr id="attribute-row' + attribute_row + '">';
  html += '  <td class="text-left" style="width: 20%;"><input type="text" name="product_attribute[' + attribute_row + '][name]" value="" placeholder="{{ entry_attribute }}" class="form-control" /><input type="hidden" name="product_attribute[' + attribute_row + '][attribute_id]" value="" /></td>';
  html += '  <td class="text-left">';
  {% for language in languages %}
  html += '<div class="input-group"><span class="input-group-addon"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /></span><textarea name="product_attribute[' + attribute_row + '][product_attribute_description][{{ language.language_id }}][text]" rows="5" placeholder="{{ entry_text }}" class="form-control"></textarea></div>';
    {% endfor %}
  html += '  </td>';
  html += '  <td class="text-right"><button type="button" onclick="$(\'#attribute-row' + attribute_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
    html += '</tr>';

  $('#attribute tbody').append(html);

  attributeautocomplete(attribute_row);

  attribute_row++;
}

function attributeautocomplete(attribute_row) {
  $('input[name=\'product_attribute[' + attribute_row + '][name]\']').autocomplete({
    'source': function(request, response) {
      $.ajax({
        url: 'index.php?route=catalog/attribute/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
        dataType: 'json',
        success: function(json) {
          response($.map(json, function(item) {
            return {
              category: item.attribute_group,
              label: item.name,
              value: item.attribute_id
            }
          }));
        }
      });
    },
    'select': function(item) {
      $('input[name=\'product_attribute[' + attribute_row + '][name]\']').val(item['label']);
      $('input[name=\'product_attribute[' + attribute_row + '][attribute_id]\']').val(item['value']);
    }
  });
}

$('#attribute tbody tr').each(function(index, element) {
  attributeautocomplete(index);
});
//--></script> 
  <script type="text/javascript"><!--
var option_row = {{ option_row }};

$('input[name=\'option\']').autocomplete({
  'source': function(request, response) {
    $.ajax({
      url: 'index.php?route=catalog/option/autocomplete&user_token={{ user_token }}&filter_name=' +  encodeURIComponent(request),
      dataType: 'json',
      success: function(json) {
        response($.map(json, function(item) {
          return {
            category: item['category'],
            label: item['name'],
            value: item['option_id'],
            type: item['type'],
            option_value: item['option_value']
          }
        }));
      }
    });
  },
  'select': function(item) {
    html  = '<div class="tab-pane" id="tab-option' + option_row + '">';
    html += ' <input type="hidden" name="product_option[' + option_row + '][product_option_id]" value="" />';
    html += ' <input type="hidden" name="product_option[' + option_row + '][name]" value="' + item['label'] + '" />';
    html += ' <input type="hidden" name="product_option[' + option_row + '][option_id]" value="' + item['value'] + '" />';
    html += ' <input type="hidden" name="product_option[' + option_row + '][type]" value="' + item['type'] + '" />';

    html += ' <div class="form-group">';
    html += '   <label class="col-sm-2 control-label" for="input-required' + option_row + '">{{ entry_required }}</label>';
    html += '   <div class="col-sm-10"><select name="product_option[' + option_row + '][required]" id="input-required' + option_row + '" class="form-control">';
    html += '       <option value="1">{{ text_yes }}</option>';
    html += '       <option value="0">{{ text_no }}</option>';
    html += '   </select></div>';
    html += ' </div>';

    if (item['type'] == 'text') {
      html += ' <div class="form-group">';
      html += '   <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
      html += '   <div class="col-sm-10"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
      html += ' </div>';
    }

    if (item['type'] == 'textarea') {
      html += ' <div class="form-group">';
      html += '   <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
      html += '   <div class="col-sm-10"><textarea name="product_option[' + option_row + '][value]" rows="5" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control"></textarea></div>';
      html += ' </div>';
    }

    if (item['type'] == 'file') {
      html += ' <div class="form-group" style="display: none;">';
      html += '   <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
      html += '   <div class="col-sm-10"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" id="input-value' + option_row + '" class="form-control" /></div>';
      html += ' </div>';
    }

    if (item['type'] == 'date') {
      html += ' <div class="form-group">';
      html += '   <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
      html += '   <div class="col-sm-3"><div class="input-group date"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
      html += ' </div>';
    }

    if (item['type'] == 'time') {
      html += ' <div class="form-group">';
      html += '   <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
      html += '   <div class="col-sm-10"><div class="input-group time"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" data-date-format="HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
      html += ' </div>';
    }

    if (item['type'] == 'datetime') {
      html += ' <div class="form-group">';
      html += '   <label class="col-sm-2 control-label" for="input-value' + option_row + '">{{ entry_option_value }}</label>';
      html += '   <div class="col-sm-10"><div class="input-group datetime"><input type="text" name="product_option[' + option_row + '][value]" value="" placeholder="{{ entry_option_value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-value' + option_row + '" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></div>';
      html += ' </div>';
    }

    if (item['type'] == 'select' || item['type'] == 'radio' || item['type'] == 'checkbox' || item['type'] == 'image') {
      html += '<div class="table-responsive">';
      html += '  <table id="option-value' + option_row + '" class="table table-striped table-bordered table-hover">';
      html += '    <thead>';
      html += '      <tr>';
      html += '        <td class="text-left">{{ entry_option_value }}</td>';
      html += '        <td class="text-right">{{ entry_quantity }}</td>';
      html += '        <td class="text-left">{{ entry_subtract }}</td>';
      html += '        <td class="text-right">{{ entry_price }}</td>';
      html += '        <td class="text-right">{{ entry_option_points }}</td>';
      html += '        <td class="text-right">{{ entry_weight }}</td>';
      html += '        <td></td>';
      html += '      </tr>';
      html += '    </thead>';
      html += '    <tbody>';
      html += '    </tbody>';
      html += '    <tfoot>';
      html += '      <tr>';
      html += '        <td colspan="6"></td>';
      html += '        <td class="text-left"><button type="button" onclick="addOptionValue(' + option_row + ');" data-toggle="tooltip" title="{{ button_option_value_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>';
      html += '      </tr>';
      html += '    </tfoot>';
      html += '  </table>';
      html += '</div>';

            html += '  <select id="option-values' + option_row + '" style="display: none;">';

            for (i = 0; i < item['option_value'].length; i++) {
        html += '  <option value="' + item['option_value'][i]['option_value_id'] + '">' + item['option_value'][i]['name'] + '</option>';
            }

            html += '  </select>';
      html += '</div>';
    }

    $('#tab-option .tab-content').append(html);

    $('#option > li:last-child').before('<li><a href="#tab-option' + option_row + '" data-toggle="tab"><i class="fa fa-minus-circle" onclick=" $(\'#option a:first\').tab(\'show\');$(\'a[href=\\\'#tab-option' + option_row + '\\\']\').parent().remove(); $(\'#tab-option' + option_row + '\').remove();"></i>' + item['label'] + '</li>');

    $('#option a[href=\'#tab-option' + option_row + '\']').tab('show');

    $('[data-toggle=\'tooltip\']').tooltip({
      container: 'body',
      html: true
    });

    $('.date').datetimepicker({
      language: '{{ datepicker }}',
      pickTime: false
    });

    $('.time').datetimepicker({
      language: '{{ datepicker }}',
      pickDate: false
    });

    $('.datetime').datetimepicker({
      language: '{{ datepicker }}',
      pickDate: true,
      pickTime: true
    });

    option_row++;
  }
});
//--></script> 
  <script type="text/javascript"><!--
var option_value_row = {{ option_value_row }};

function addOptionValue(option_row) {
  html  = '<tr id="option-value-row' + option_value_row + '">';
  html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][option_value_id]" class="form-control">';
  html += $('#option-values' + option_row).html();
  html += '  </select><input type="hidden" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][product_option_value_id]" value="" /></td>';
  html += '  <td class="text-right"><input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][quantity]" value="" placeholder="{{ entry_quantity }}" class="form-control" /></td>';
  html += '  <td class="text-left"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][subtract]" class="form-control">';
  html += '    <option value="1">{{ text_yes }}</option>';
  html += '    <option value="0">{{ text_no }}</option>';
  html += '  </select></td>';
  html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price_prefix]" class="form-control">';
  html += '    <option value="+">+</option>';
  html += '    <option value="-">-</option>';
  html += '  </select>';
  html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
  html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points_prefix]" class="form-control">';
  html += '    <option value="+">+</option>';
  html += '    <option value="-">-</option>';
  html += '  </select>';
  html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][points]" value="" placeholder="{{ entry_points }}" class="form-control" /></td>';
  html += '  <td class="text-right"><select name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight_prefix]" class="form-control">';
  html += '    <option value="+">+</option>';
  html += '    <option value="-">-</option>';
  html += '  </select>';
  html += '  <input type="text" name="product_option[' + option_row + '][product_option_value][' + option_value_row + '][weight]" value="" placeholder="{{ entry_weight }}" class="form-control" /></td>';
  html += '  <td class="text-left"><button type="button" onclick="$(this).tooltip(\'destroy\');$(\'#option-value-row' + option_value_row + '\').remove();" data-toggle="tooltip" rel="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';

  $('#option-value' + option_row + ' tbody').append(html);
  $('[rel=tooltip]').tooltip();

  option_value_row++;
}
//--></script> 
  <script type="text/javascript"><!--
var discount_row = {{ discount_row }};

function addDiscount() {
  html  = '<tr id="discount-row' + discount_row + '">';
    html += '  <td class="text-left"><select name="product_discount[' + discount_row + '][customer_group_id]" class="form-control">';
    {% for customer_group in customer_groups %}
    html += '    <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name|escape('js') }}</option>';
    {% endfor %}
    html += '  </select></td>';
    html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][quantity]" value="" placeholder="{{ entry_quantity }}" class="form-control" /></td>';
    html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
  html += '  <td class="text-right"><input type="text" name="product_discount[' + discount_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
    html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_discount[' + discount_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left"><button type="button" onclick="$(\'#discount-row' + discount_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';

  $('#discount tbody').append(html);

  $('.date').datetimepicker({
    pickTime: false
  });

  discount_row++;
}
//--></script> 
  <script type="text/javascript"><!--
var special_row = {{ special_row }};

function addSpecial() {
  html  = '<tr id="special-row' + special_row + '">';
    html += '  <td class="text-left"><select name="product_special[' + special_row + '][customer_group_id]" class="form-control">';
    {% for customer_group in customer_groups %}
    html += '      <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name|escape('js') }}</option>';
    {% endfor %}
    html += '  </select></td>';
    html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][priority]" value="" placeholder="{{ entry_priority }}" class="form-control" /></td>';
  html += '  <td class="text-right"><input type="text" name="product_special[' + special_row + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
    html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_start]" value="" placeholder="{{ entry_date_start }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left" style="width: 20%;"><div class="input-group date"><input type="text" name="product_special[' + special_row + '][date_end]" value="" placeholder="{{ entry_date_end }}" data-date-format="YYYY-MM-DD" class="form-control" /><span class="input-group-btn"><button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button></span></div></td>';
  html += '  <td class="text-left"><button type="button" onclick="$(\'#special-row' + special_row + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';

  $('#special tbody').append(html);

  $('.date').datetimepicker({
    language: '{{ datepicker }}',
    pickTime: false
  });

  special_row++;
}
//--></script> 
  <script type="text/javascript"><!--
var image_row = {{ image_row }};

function addImage() {
  html  = '<tr id="image-row' + image_row + '">';
  html += '  <td class="text-left"><a href="" id="thumb-image' + image_row + '"data-toggle="image" class="img-thumbnail "><img src="{{ placeholder }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a><input type="hidden" class="additional-image" name="product_image[' + image_row + '][image]" value="" id="input-image' + image_row + '" /></td>';

  html += '   <td><input type="text" name="product_image[{{ image_row }}][image_custom_title]" value="{{ product_image.image_custom_title }}" placeholder="{{ entry_image_custom_title }}" class="form-control additional_image_custom_title" /></td>';

  html += '  <td><input type="text" name="product_image[{{ image_row }}][image_custom_alt]" value="{{ product_image.image_custom_alt }}" placeholder="{{ entry_image_custom_alt }}" class="form-control additional_image_custom_alt" /></td>';
    
  html += '  <td class="text-right"><input type="text" name="product_image[' + image_row + '][sort_order]" value="" placeholder="{{ entry_sort_order }}" class="form-control" /></td>';

  html += '  <td class="text-left"><button type="button" onclick="$(\'#image-row' + image_row  + '\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
  html += '</tr>';

  $('#images tbody').append(html);

  image_row++;
}
//--></script> 
  <script type="text/javascript"><!--
var recurring_row = {{ recurring_row }};

function addRecurring() {
  html  = '<tr id="recurring-row' + recurring_row + '">';
  html += '  <td class="left">';
  html += '    <select name="product_recurring[' + recurring_row + '][recurring_id]" class="form-control">>';
  {% for recurring in recurrings %}
  html += '      <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>';
  {% endfor %}
  html += '    </select>';
  html += '  </td>';
  html += '  <td class="left">';
  html += '    <select name="product_recurring[' + recurring_row + '][customer_group_id]" class="form-control">>';
  {% for customer_group in customer_groups %}
  html += '      <option value="{{ customer_group.customer_group_id }}">{{ customer_group.name }}</option>';
  {% endfor %}
  html += '    <select>';
  html += '  </td>';
  html += '  <td class="left">';
  html += '    <a onclick="$(\'#recurring-row' + recurring_row + '\').remove()" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></a>';
  html += '  </td>';
  html += '</tr>';

  $('#tab-recurring table tbody').append(html);

  recurring_row++;
}
//--></script> 
  <script type="text/javascript"><!--
$('.date').datetimepicker({
  language: '{{ datepicker }}',
  pickTime: false
});

$('.time').datetimepicker({
  language: '{{ datepicker }}',
  pickDate: false
});

$('.datetime').datetimepicker({
  language: '{{ datepicker }}',
  pickDate: true,
  pickTime: true
});
//--></script> 
  <script type="text/javascript"><!--
$('#language a:first').tab('show');
$('#option a:first').tab('show');
//--></script>

<script type="text/javascript">
    
    // focus keyphrase
    var focus_keyphrase = $('input[type="text"].focus_keyphrase').val().toLowerCase().trim();

    var focus_keyphrase_words = 0;

    if(focus_keyphrase != ''){
      focus_keyphrase_words = focus_keyphrase.match(/\S+/g).length;
    }

    // focus keyphrase on change
    $('input[type="text"].focus_keyphrase').on('keyup', function(){
        
        focus_keyphrase = $(this).val().toLowerCase().trim();
  
        if(focus_keyphrase != ''){
          focus_keyphrase_words = focus_keyphrase.match(/\S+/g).length;
        }

        focusKeyPhrase(focus_keyphrase, focus_keyphrase_words);

        checkPreviousKeyphrases(focus_keyphrase);

        metaTitleKeyphrase(meta_title, focus_keyphrase);

        metaDescriptionKeyphrase(meta_description, focus_keyphrase);

        productDescription(description_words, description);

        keyphraseInIntro(description_html, description, focus_keyphrase, intro_start_index, intro_end_index);

        headingTags(description_html, focus_keyphrase);
      
        subHeadingTags(description_html, focus_keyphrase);

        imageAttributes(image_custom_title,image_custom_alt, focus_keyphrase);

        additionalImageAttributes(additional_image_custom_title, additional_image_custom_alt, focus_keyphrase);

        seoUrlKeyphrase(slug, focus_keyphrase);

        checkKeyphraseDensity(focus_keyphrase);

        countMessageItems();

    });


     // meta title
    var meta_title = $("input[type='text'].meta_title").val().toLowerCase();

     // meta title width
    var meta_title_width = 0;

    if(meta_title != ''){
        meta_title_width = meta_title.split('').length;
    }

    $("#meta_title_chars").text(meta_title_width);

    // meta title on change
    $("input[type='text'].meta_title").on('keyup', function(){
        
      meta_title = $(this).val().toLowerCase();

      meta_title_width = meta_title.split('').length; 

      $("#meta_title_chars").text(meta_title_width);

      metaTitleWidth(meta_title_width);

      metaTitleKeyphrase(meta_title, focus_keyphrase);

      focusKeyPhrase(focus_keyphrase, focus_keyphrase_words);
      
      checkKeyphraseDensity(focus_keyphrase);
      
      countMessageItems();

    });

    // meta description
    var meta_description = $('textarea.meta_description').val().toLowerCase();

    // meta description length
    var meta_description_chars  = 0;

    if(meta_description != ''){
        meta_description_chars = meta_description.split('').length;
    }

    // meta description on change
    $("textarea.meta_description").on('keyup', function(){
          
      meta_description = $(this).val().toLowerCase();

      console.log(meta_description);


      if($(this).val() != ''){
          meta_description_chars = $(this).val().split('').length;
      }else{
          meta_description_chars = 0;
      }

      metaDescriptionLength(meta_description_chars);

      metaDescriptionKeyphrase(meta_description, focus_keyphrase);
      
      checkKeyphraseDensity(focus_keyphrase);
      
      countMessageItems();

    });



    // seo url / slug
    var seo_url = $("input[type='text'].seo_url").val();
    var slug = seo_url.replace(/\-+/g, ' ');

    if(seo_url != ''){
      seoUrlKeyphrase(slug, focus_keyphrase);
    }else{
      $("#no_slug_problem").removeClass('hidden');
      $("#slug_good").addClass('hidden');
      $("#keyphrase_in_slug_problem").addClass('hidden');
      $("#keyphrase_in_slug_good").addClass('hidden');
      $("#keyphrase_in_slug_improvement").addClass('hidden')

    }

    // seo url on change
    $("input[type='text'].seo_url").on('keyup', function(){
      
      seo_url = $(this).val();

      slug = seo_url.replace(/\-+/g, ' ');

      seoUrlKeyphrase(slug, focus_keyphrase);
      
      checkKeyphraseDensity(focus_keyphrase);
      
      countMessageItems();

    });


    function focusKeyPhrase(focus_keyphrase, focus_keyphrase_words) {

      if(focus_keyphrase != ''){

        $("#keyphrase_length_problem").addClass('hidden');

        if(focus_keyphrase_words >= 2 && focus_keyphrase_words <= 4 ) {

          $("#keyphrase_length_good").removeClass('hidden');
          $("#keyphrase_length_improvement").addClass('hidden');
          $("#keyphrase_length_problem").addClass('hidden');

        }else if(focus_keyphrase_words > 4) {

          $("#keyphrase_length_improvement").removeClass('hidden');
          $("#keyphrase_length_good").addClass('hidden');
          $("#keyphrase_length_problem").addClass('hidden');

        }else{

          $("#keyphrase_length_good").addClass('hidden');
          $("#keyphrase_length_improvement").addClass('hidden');

        }

      }else {
        $("#keyphrase_length_problem").removeClass('hidden');
        $("#keyphrase_length_improvement").addClass('hidden');
        $("#keyphrase_over_density_problem").addClass('hidden');
        $("#keyphrase_density_good").addClass('hidden');
        $("#keyphrase_in_meta_description_good").addClass('hidden');
        $("#keyphrase_exact_in_title_good").addClass('hidden');
        $("#keyphrase_in_slug_good").addClass('hidden');
        $("#keyphrase_in_intro_good").addClass('hidden');
        $("#keyphrase_in_intro_improvement").addClass('hidden');
        $("#keyphrase_low_density_improvement").addClass('hidden');
        $("#no_previous_keyphrase_good").addClass('hidden');
        $("#keyphrase_length_good").addClass('hidden');
        $("#h1_tag_good").addClass('hidden');
        $("#subheading_tag_good").addClass('hidden');

      }

    }

     function checkPreviousKeyphrases(focus_keyphrase){

      var keyphrases = [];
      var keyphrase ='';

      var count = 0;

      $( "#focus_keyphrases li" ).each(function( index ) {

        previous_keyphrase = $(this).text().toLowerCase();
        
        keyphrases.push(previous_keyphrase);

      });

      if(focus_keyphrase != '' && keyphrases != ''){

          if(keyphrases.indexOf(focus_keyphrase) == -1){

            $("#no_previous_keyphrase_good").removeClass('hidden');
            $("#no_previous_keyphrase_improvement").addClass('hidden');

          }else{

            $("#no_previous_keyphrase_good").addClass('hidden');
            $("#no_previous_keyphrase_improvement").removeClass('hidden');

          }

        }else{

            $("#no_previous_keyphrase_good").addClass('hidden');
            $("#no_previous_keyphrase_improvement").addClass('hidden');

        }

    }

    function metaTitleKeyphrase(meta_title, focus_keyphrase) {

      if(focus_keyphrase != '' && meta_title != ''){

        if(meta_title.indexOf(focus_keyphrase) == 0 ){

          $("#keyphrase_exact_in_title_good").removeClass('hidden');
          $("#keyphrase_in_title_improvement").addClass('hidden');
          $("#keyphrase_not_in_title_problem").addClass('hidden');

        }else if(meta_title.indexOf(focus_keyphrase) != -1){

          $("#keyphrase_in_title_improvement").removeClass('hidden');
          $("#keyphrase_not_in_title_problem").addClass('hidden');
          $("#keyphrase_exact_in_title_good").addClass('hidden');

        }
        else{

          $("#keyphrase_not_in_title_problem").removeClass('hidden');
          $("#keyphrase_exact_in_title_good").addClass('hidden');
          $("#keyphrase_in_title_improvement").addClass('hidden');

        }

      }else{

          $("#keyphrase_not_in_title_problem").addClass('hidden');
          $("#keyphrase_exact_in_title_good").addClass('hidden');
          $("#keyphrase_in_title_improvement").addClass('hidden');

      }
      
    }

    function metaTitleWidth(meta_title_width) {
     
      if(meta_title_width < 1 ){

        $("#no_meta_title_problem").removeClass('hidden');
        $("#keyphrase_in_title_improvement").addClass('hidden');
        $("#keyphrase_exact_in_title_good").addClass('hidden');
        $("#meta_title_width_good").addClass('hidden');
        $("#meta_title_width_improvement").addClass('hidden');
        $("#meta_title_width_problem").addClass('hidden');

      }else if(meta_title_width >= 1 && meta_title_width < 47){

        $("#meta_title_width_improvement").removeClass('hidden');
        $("#meta_title_width_good").addClass('hidden');
        $("#meta_title_width_problem").addClass('hidden');
        $("#no_meta_title_problem").addClass('hidden');

      }else if(meta_title_width >= 47 && meta_title_width <= 70){

        $("#meta_title_width_good").removeClass('hidden');
        $("#meta_title_width_improvement").addClass('hidden');
        $("#meta_title_width_problem").addClass('hidden');
        $("#no_meta_title_problem").addClass('hidden');

      }else {

        $("#meta_title_width_problem").removeClass('hidden');
        $("#meta_title_width_good").addClass('hidden');
        $("#meta_title_width_improvement").addClass('hidden');
        $("#no_meta_title_problem").addClass('hidden');

      }

    
    }


    function metaDescriptionKeyphrase(meta_description, focus_keyphrase){

      if(focus_keyphrase !=''){

        if(meta_description !=''){

          if(meta_description.toLowerCase().indexOf(focus_keyphrase) != -1){
            $("#keyphrase_in_meta_description_good").removeClass('hidden');
            $("#keyphrase_in_meta_description_problem").addClass('hidden');
          }else{
            $("#keyphrase_in_meta_description_problem").removeClass('hidden');
            $("#keyphrase_in_meta_description_good").addClass('hidden');
          }
  
        }else{
            $("#keyphrase_in_meta_description_problem").addClass('hidden');
            $("#keyphrase_in_meta_description_good").addClass('hidden');
        }
        
      }else{
          $("#keyphrase_in_meta_description_good").addClass('hidden');
          $("#keyphrase_in_meta_description_problem").addClass('hidden');
      }

    }

    function metaDescriptionLength(meta_description_chars) {

      $('#meta_description_chars').text(meta_description_chars);

      if(meta_description_chars >= 1 && meta_description_chars < 120 ){
          
          $("#meta_description_length_under_improvement").removeClass('hidden');
          $("#meta_description_length_problem").addClass('hidden');
          $("#meta_description_length_over_problem").addClass('hidden');
          $("#meta_description_length_over_improvement").addClass('hidden');
          $("#keyphrase_in_meta_description_problem").addClass('hidden');
          $("#keyphrase_in_meta_description_good").addClass('hidden');
          $("#meta_description_length_good").addClass('hidden');

      }else if(meta_description_chars >= 120 && meta_description_chars <= 200){
          
          $("#meta_description_length_good").removeClass('hidden');
          $("#meta_description_length_over_improvement").addClass('hidden');
          $("#meta_description_length_under_improvement").addClass('hidden');
          $("#meta_description_length_problem").addClass('hidden');
          $("#meta_description_length_over_problem").addClass('hidden');
          $("#keyphrase_in_meta_description_problem").addClass('hidden');
          $("#keyphrase_in_meta_description_good").addClass('hidden');

      }else if(meta_description_chars > 200 && meta_description_chars <= 320 ){

          $("#meta_description_length_over_improvement").removeClass('hidden');
          $("#meta_description_length_under_improvement").addClass('hidden');
          $("#meta_description_length_over_problem").addClass('hidden');
          $("#meta_description_length_problem").addClass('hidden');
          $("#meta_description_length_good").addClass('hidden');
          $("#keyphrase_in_meta_description_problem").addClass('hidden');
          $("#keyphrase_in_meta_description_good").addClass('hidden');

      } else if(meta_description_chars > 320){ 

          $("#meta_description_length_over_problem").removeClass('hidden');
          $("#meta_description_length_over_improvement").addClass('hidden');
          $("#meta_description_length_under_improvement").addClass('hidden');
          $("#meta_description_length_problem").addClass('hidden');
          $("#meta_description_length_good").addClass('hidden');
          $("#keyphrase_in_meta_description_problem").addClass('hidden');
          $("#keyphrase_in_meta_description_good").addClass('hidden');

      }else{

          $("#meta_description_length_problem").removeClass('hidden');
          $("#meta_description_length_over_problem").addClass('hidden');
          $("#meta_description_length_good").addClass('hidden');
          $("#meta_description_length_under_improvement").addClass('hidden');
          $("#meta_description_length_over_improvement").addClass('hidden');
          $("#keyphrase_in_meta_description_good").addClass('hidden');
          $("#keyphrase_in_meta_description_problem").addClass('hidden');

      }
  }

    function productDescription(description_words, description) {
      // good   

      if(description != ''){
        
        $("#no_description_problem").addClass('hidden');

        if(description_words >= 1 && description_words < 200 ){
          
          $("#description_far_below_length_improvement").removeClass('hidden');
          $("#description_below_length_improvement").addClass('hidden');
          $("#description_slight_below_length_improvement").addClass('hidden');
          $("#description_length_good").addClass('hidden');

        }else if(description_words >= 200 && description_words < 250 ){
          
          $("#description_below_length_improvement").removeClass('hidden');
          $("#description_slight_below_length_improvement").addClass('hidden');
          $("#description_far_below_length_improvement").addClass('hidden');
          $("#description_length_good").addClass('hidden');

        }else if(description_words >= 250 && description_words < 300){

          $("#description_slight_below_length_improvement").removeClass('hidden');
          $("#description_far_below_length_improvement").addClass('hidden');
          $("#description_below_length_improvement").addClass('hidden');
          $("#description_length_good").addClass('hidden');

        }else if(description_words >= 300){

          $("#description_length_good").removeClass('hidden');
          $("#description_far_below_length_improvement").addClass('hidden');
          $("#description_below_length_improvement").addClass('hidden');
          $("#description_slight_below_length_improvement").addClass('hidden');

        }else{

          $("#description_far_below_length_improvement").removeClass('hidden');
          $("#description_below_length_improvement").addClass('hidden');
          $("#description_slight_below_length_improvement").addClass('hidden');
          $("#description_length_good").addClass('hidden');
          
        }
       
      }else{
          $("#no_description_problem").removeClass('hidden');
          $("#description_length_good").addClass('hidden');
          $("#description_far_below_length_improvement").addClass('hidden');
          $("#description_below_length_improvement").addClass('hidden');
          $("#description_slight_below_length_improvement").addClass('hidden');
      }


    }

    function checkLinks(description_html) {

      if(description != ''){

      // check for internal links
        if(description_html.indexOf('{{ www_store_non_secure_url }}') != -1 ||
          description_html.indexOf('{{ www_store_secure_url }}') != -1 ||
          description_html.indexOf('{{ store_non_secure_url }}') != -1 ||
          description_html.indexOf('{{ store_secure_url }}') != -1){

          $("#internal_link_good").removeClass('hidden');
          $("#internal_link_problem").addClass('hidden');
        }else{
            $("#internal_link_problem").removeClass('hidden');
            $("#internal_link_good").addClass('hidden');
        }
        
        var link = 'href=';

        var store_links = ['{{ www_store_non_secure_url }}', '{{ www_store_secure_url }}','{{ store_non_secure_url }}', '{{ store_secure_url }}'];

        var total_links = 0;
        var store_link_count = 0;

        var link_index  = 0;
        var store_link_index  = 0;

          // total links
          while(true){

              link_index = description_html.indexOf(link, link_index);

              if(link_index != -1){ 
                total_links++; 
                link_index += link.length;
              }
              else{
                break;
              }
          }

          // internal links
          $(store_links).each(function(index){
            // just to check store links are not same
            if(store_links[index] != store_links[index-1]){

              while(true){

                store_link_index = description_html.indexOf(store_links[index], store_link_index);

                if(store_link_index != -1){ 
                  store_link_count++; 
                  store_link_index += store_links[index].length;
                }
                else{
                  break;
                }
              }

            }

          });


          // external links
          if(total_links > store_link_count){
              $("#outbound_link_good").removeClass('hidden');
              $("#outbound_link_problem").addClass('hidden');
          }else{
              $("#outbound_link_problem").removeClass('hidden');
              $("#outbound_link_good").addClass('hidden');
          }

      }else{
        $("#internal_link_problem").addClass('hidden');
        $("#internal_link_good").addClass('hidden');
        $("#outbound_link_good").addClass('hidden');
        $("#outbound_link_problem").addClass('hidden');
        $("#keyphrase_in_intro_improvement").addClass('hidden');

      }

    }

    function keyphraseInIntro(description_html, description, focus_keyphrase, intro_start_index, intro_end_index) {

      description_intro_paragraph = description_html.substr(intro_start_index, intro_end_index).toLowerCase();
      

      if(description != ''){

        if(focus_keyphrase != ''){

          if(description_intro_paragraph.indexOf(focus_keyphrase) != -1){
            $("#keyphrase_in_intro_good").removeClass('hidden');
            $("#keyphrase_in_intro_improvement").addClass('hidden');
          }else{
            $("#keyphrase_in_intro_improvement").removeClass('hidden');
            $("#keyphrase_in_intro_good").addClass('hidden');
          }

        }
      }
    
    }

     // for readability
    function checkSubHeadings(description_html) {

      var count_subheading  = 0;

       if(description != ''){
          
          if( description_html.indexOf('<h2') != -1 ||
              description_html.indexOf('<h3') != -1 ||
              description_html.indexOf('<h4') != -1 ||
              description_html.indexOf('<h5') != -1 ||
              description_html.indexOf('<h6') != -1)
            {
              count_subheading = 1;
            }else{
              count_subheading = 0;
            }

          if(description_words > 300 && count_subheading == 1){

            $("#subheading_good").removeClass('hidden');
            $("#subheading_problem").addClass('hidden');
            
          }else if(description_words < 300 && count_subheading == 1){
              $("#subheading_good").removeClass('hidden');
              $("#subheading_problem").addClass('hidden');
          }else{
              $("#subheading_problem").removeClass('hidden');
              $("#subheading_good").addClass('hidden');
          }

       }else{
            $("#subheading_problem").addClass('hidden');
            $("#subheading_good").addClass('hidden');
       }

    }

    function headingTags(description_html, focus_keyphrase){

      
      if(description != ''){
          
          var h1_start_indexes = [];
          var h1_end_indexes = [];

          var h1_open = '<h1';
          var h1_close = '</h1>';

          var h1_open_count = 0;
          var h1_open_index  = 0;

          var h1_close_count = 0;
          var h1_close_index  = 0;

            
          while(true){

              h1_open_index = description_html.indexOf(h1_open, h1_open_index);

              if(h1_open_index != -1){ 
                h1_open_count++; 
                
                h1_start_indexes.push(h1_open_index);

                h1_open_index += h1_open.length;
              }
              else{
                break;
              }
          }


          while(true){

              h1_close_index = description_html.indexOf(h1_close, h1_close_index);

              if(h1_close_index != -1){ 
                h1_close_count++; 
                
                h1_end_indexes.push(h1_close_index);

                h1_close_index += h1_close.length;
              }
              else{
                break;
              }
          }

          if(h1_start_indexes !='' && h1_open_count != 0){
            
            $(h1_start_indexes).each(function(index){

                var h1_tag = description_html.substring(h1_start_indexes[index], h1_end_indexes[index]);
                
                if(focus_keyphrase != ''){

                  if(h1_tag.toLowerCase().indexOf(focus_keyphrase) != -1){
                      $("#h1_tag_good").removeClass('hidden');
                      $("#h1_tag_improvement").addClass('hidden');
                  }else{
                      $("#h1_tag_improvement").removeClass('hidden');
                      $("#h1_tag_good").addClass('hidden');
                  }

                  $("#h1_tag_problem").addClass('hidden');

                }else{
                    $("#h1_tag_problem").addClass('hidden');
                    $("#h1_tag_improvement").addClass('hidden');
                    $("#h1_tag_good").addClass('hidden');
                }

            });

          }  
          else{
              $("#h1_tag_problem").removeClass('hidden');
              $("#h1_tag_improvement").addClass('hidden');
              $("#h1_tag_good").addClass('hidden');
          }


      }else{
          $("#no_description_problem").removeClass('hidden');
          $("#h1_tag_improvement").addClass('hidden');
          $("#h1_tag_problem").addClass('hidden');
          $("#h1_tag_good").addClass('hidden');

      }

    }

    function subHeadingTags(description_html, focus_keyphrase){
      
      if(description != ''){

          var subheading_start_indexes = [];
          var subheading_end_indexes = [];

          var subheading_open = ['<h2', '<h3','<4', '<5', '<h6'];
          var subheading_close = ['</h2>', '</h3>','</4>', '</5>', '</h6>']

          var subheading_open_count = 0;
          var subheading_open_index  = 0;

          var subheading_close_count = 0;
          var subheading_close_index  = 0;

          $(subheading_open).each(function(index){
            
            while(true){
                
              subheading_open_index = description_html.indexOf(subheading_open[index], subheading_open_index);

              if(subheading_open_index != -1){ 
                subheading_open_count++; 
                
                subheading_start_indexes.push(subheading_open_index);

                subheading_open_index += subheading_open[index].length;
              }
              else{
                break;
              }
            }

          });


          $(subheading_close).each(function(index) {

            while(true){

              subheading_close_index = description_html.indexOf(subheading_close[index], subheading_close_index);

              if(subheading_close_index != -1){ 
                subheading_close_count++; 
                
                subheading_end_indexes.push(subheading_close_index);

                subheading_close_index += subheading_close[index].length;
              }
              else{
                break;
              }
                
            }

          });


          if(subheading_start_indexes != '' && subheading_open_count != 0){ 
            
            $(subheading_start_indexes).each(function(index){

              var subheading_tag = description_html.substring(subheading_start_indexes[index], subheading_end_indexes[index]);
              
              if(subheading_tag.toLowerCase().indexOf(focus_keyphrase) != -1){
                  $("#subheading_tag_good").removeClass('hidden');
                  $("#subheading_tag_improvement").addClass('hidden');
              }else{
                  $("#subheading_tag_improvement").removeClass('hidden');
                  $("#subheading_tag_good").addClass('hidden');
              }


               if(focus_keyphrase != ''){

                  if(subheading_tag.toLowerCase().indexOf(focus_keyphrase) != -1){
                      $("#subheading_tag_good").removeClass('hidden');
                      $("#subheading_tag_improvement").addClass('hidden');
                  }else{
                      $("#subheading_tag_improvement").removeClass('hidden');
                      $("#subheading_tag_good").addClass('hidden');
                  }

                }else{
                    $("#subheading_tag_improvement").addClass('hidden');
                    $("#subheading_tag_good").addClass('hidden');
                }

            });

          }else{
              $("#subheading_tag_improvement").addClass('hidden');
              $("#subheading_tag_good").addClass('hidden');

          }
          


      }else{
          $("#no_description_problem").removeClass('hidden');
          $("#subheading_tag_improvement").addClass('hidden');
          $("#subheading_tag_good").addClass('hidden');
      }

    }
   
    function paragraphLength(description_html, description_words){

      // paragraphs with more than 150 words
      var count_problem_paragraphs = 0;
      var problem_sections = []; 
      var paragraph_words = 0;
      var text = '';

      if(description != ''){
       
        var paragraphs       = description_html.split("</p>");

        $(paragraphs).each(function(index){

            if(paragraphs[index] != '' ){
                text = $(paragraphs[index]).text();
                
                if(text != ''){
                  paragraph_words = text.match(/\S+/g).length;
                }
            }

            if(paragraph_words > 150){
               count_problem_paragraphs++;
            }

            if(paragraph_words > 300){

              if(paragraphs[index].indexOf('</h2>') != -1 || paragraphs[index].indexOf('</h4>') != -1 || paragraphs[index].indexOf('</h4>') != -1 || paragraphs[index].indexOf('</h5>') != -1 || paragraphs[index].indexOf('</h6>') != -1){
                  
              }else{
                problem_sections.push(index);
              }

            }

        });   


        if(count_problem_paragraphs > 0){
            $("#paragraph_length_problem").removeClass('hidden');
            $("#paragraph_length_good").addClass('hidden');
        }else{
            $("#paragraph_length_good").removeClass('hidden');
            $("#paragraph_length_problem").addClass('hidden');
        }

        if(problem_sections != ''){
            $("#subheading_distribution_problem").removeClass('hidden');
        }else{
            $("#subheading_distribution_problem").addClass('hidden');
        }

        if(description_words < 150){
          $("#paragraph_length_good").removeClass('hidden');
          $("#paragraph_length_problem").addClass('hidden');
          $("#subheading_distribution_problem").addClass('hidden');
        }

      }else{
          $("#no_description_problem").removeClass('hidden');
          $("#sentence_length_improvement").addClass('hidden');
          $("#paragraph_length_problem").addClass('hidden');
          $("#subheading_distribution_problem").addClass('hidden');
          $("#paragraph_length_good").addClass('hidden');
          $("#subheading_distribution_problem").addClass('hidden');
          $("#subheading_tag_improvement").addClass('hidden');
          $("#subheading_tag_good").addClass('hidden');
          $("#ease_reading_problem").addClass('hidden');
          $("#h1_tag_problem").addClass('hidden');
          $("#h1_tag_improvement").addClass('hidden');
          $("#h1_tag_good").addClass('hidden');
      }

    }

    function improvementSentencesRatio(description_html){
      // sentences with more than 20 words
      var count_improvement_sentences = 0; 

        if(description != ''){

          var sentences       = description_html.split(". ");
          var total_sentences = description_html.split(". ").length;


          $(sentences).each(function(index){
              var sentence = sentences[index];

              var sentence_words = sentences[index].match(/\S+/g).length;

              if(sentence_words > 20){
                count_improvement_sentences++;
              }

          });   


          var improvement_sentences_ratio = (count_improvement_sentences / total_sentences) *100;

          if(improvement_sentences_ratio > 25){
              $("#sentence_length_improvement").removeClass('hidden');
              $("#sentence_length_good").addClass('hidden');
          }else{
              $("#sentence_length_good").removeClass('hidden');
              $("#sentence_length_improvement").addClass('hidden');
          }

        }else{
              $("#sentence_length_improvement").addClass('hidden');
              $("#sentence_length_good").addClass('hidden');
        }
  
    }

   function transitionWords(description) {

      var transition_words_status = 0;

      var transition_words = ['first of all', 'another', 'also', 'furthermore', 'finally', 'because','so', 'due to', 'for the reason that', 'similarly', 'likewise', 'rather', 'while', 'in contrast', 'as a result', 'hence', 'consequently', 'therefore', 'seems like', 'maybe', 'probably', 'almost', 'above all', 'most noteworthy', 'certainly', 'even more'];

      if(description != ''){
          
          $(transition_words).each(function(index){
              if(description.toLowerCase().indexOf(transition_words[index]) != -1){
                transition_words_status = 1;
              }
          });

          if(transition_words_status != 0){
              $("#transition_words_good").removeClass('hidden');
              $("#no_transition_words_problem").addClass('hidden');
          }else{
              $("#no_transition_words_problem").removeClass('hidden');
              $("#transition_words_good").addClass('hidden');
          }

      }else{
          $("#transition_words_good").addClass('hidden');
          $("#no_transition_words_problem").addClass('hidden');
      }
    
    }

    function imageAttributes(image_custom_title,image_custom_alt, focus_keyphrase) {

      if(thumb_image != ''){

          $("#no_image_problem").addClass('hidden');

          if(image_custom_alt != ''){

          $("#no_image_alt_improvement").addClass('hidden');

          if(focus_keyphrase != ''){

            if(image_custom_alt.toLowerCase().indexOf(focus_keyphrase) != -1){
                $("#image_alt_improvement").addClass('hidden');
                $("#image_alt_good").removeClass('hidden');
            }else{
                $("#image_alt_good").addClass('hidden');
                $("#image_alt_improvement").removeClass('hidden');
            }

          }else{
                $("#image_alt_improvement").addClass('hidden');
                $("#image_alt_good").addClass('hidden');
          }

        }else{
            $("#no_image_alt_improvement").removeClass('hidden');
            $("#image_alt_improvement").addClass('hidden');
            $("#image_alt_good").addClass('hidden');
        }

        if(image_custom_title != ''){

            $("#no_image_title_improvement").addClass('hidden');

            if(focus_keyphrase != ''){

              if(image_custom_title.toLowerCase().indexOf(focus_keyphrase) != -1){
                  $("#image_title_improvement").addClass('hidden');
                  $("#image_title_good").removeClass('hidden');
              }else{
                  $("#image_title_good").addClass('hidden');
                  $("#image_title_improvement").removeClass('hidden');
              }

            }else{
                  $("#image_title_improvement").addClass('hidden');
                  $("#image_title_good").addClass('hidden');
            }

        }else{
            $("#no_image_title_improvement").removeClass('hidden');
            $("#image_title_improvement").addClass('hidden');
            $("#image_title_good").addClass('hidden');
        }

      }else{
          $("#no_image_problem").removeClass('hidden');
          $("#image_title_improvement").addClass('hidden');
          $("#no_image_title_improvement").addClass('hidden');
          $("#image_title_good").addClass('hidden');
          $("#image_alt_improvement").addClass('hidden');
          $("#no_image_alt_improvement").addClass('hidden');
          $("#image_alt_good").addClass('hidden');
      }
      
    }

    function additionalImageAttributes(additional_image_custom_title, additional_image_custom_alt, focus_keyphrase) {

      if(additional_image !=''){

           if(additional_image_custom_alt != ''){

            $("#no_additional_image_alt_improvement").addClass('hidden');

            if(focus_keyphrase != ''){
              $( ".additional_image_custom_alt" ).each(function( index ) {
                  additional_image_custom_alt = $(this).val().toLowerCase();
                if(additional_image_custom_alt.indexOf(focus_keyphrase) != -1){
                    $("#additional_image_alt_improvement").addClass('hidden');
                    $("#additional_image_alt_good").removeClass('hidden');
                }else{
                    $("#additional_image_alt_good").addClass('hidden');
                    $("#additional_image_alt_improvement").removeClass('hidden');
                }
              });

            }else{
                  $("#additional_image_alt_improvement").addClass('hidden');
                  $("#additional_image_alt_good").addClass('hidden');
            }

        }else{
            $("#no_additional_image_alt_improvement").removeClass('hidden');
            $("#additional_image_alt_improvement").addClass('hidden');
            $("#additional_image_alt_good").addClass('hidden');
        }

        if(additional_image_custom_title != ''){

            $("#no_additional_image_title_improvement").addClass('hidden');

            if(focus_keyphrase != ''){
              
              $( ".additional_image_custom_title" ).each(function( index ) {
                  additional_image_custom_title = $(this).val().toLowerCase();

                if(additional_image_custom_title.indexOf(focus_keyphrase) != -1){
                    $("#additional_image_title_improvement").addClass('hidden');
                    $("#additional_image_title_good").removeClass('hidden');
                }else{
                    $("#additional_image_title_good").addClass('hidden');
                    $("#additional_image_title_improvement").removeClass('hidden');
                }
              });

            }else{
                  $("#additional_image_title_improvement").addClass('hidden');
                  $("#additional_image_title_good").addClass('hidden');
            }

        }else{

            $("#no_additional_image_title_improvement").removeClass('hidden');
            $("#additional_image_title_improvement").addClass('hidden');
            $("#additional_image_title_good").addClass('hidden');
        }

      }else{

          $("#no_additional_image_title_improvement").addClass('hidden');
          $("#no_additional_image_alt_improvement").addClass('hidden');
          $("#additional_image_title_improvement").addClass('hidden');
          $("#additional_image_title_good").addClass('hidden');
          $("#additional_image_alt_improvement").addClass('hidden');
          $("#additional_image_alt_good").addClass('hidden');
      }

    }


    function seoUrlKeyphrase(slug, focus_keyphrase) {
        
      if(slug != ''){

        $("#slug_good").removeClass('hidden');

        if(slug.toLowerCase().indexOf(focus_keyphrase) != -1 ){
            $("#keyphrase_in_slug_good").removeClass('hidden');
            $("#keyphrase_in_slug_improvement").addClass('hidden');
            $("#keyphrase_in_slug_problem").addClass('hidden');
            $("#no_slug_problem").addClass('hidden');
        }else{
            $("#keyphrase_in_slug_improvement").removeClass('hidden');
            $("#keyphrase_in_slug_problem").addClass('hidden');
            $("#keyphrase_in_slug_good").addClass('hidden');
            $("#no_slug_problem").addClass('hidden');
        }  

      }else{
            $("#no_slug_problem").removeClass('hidden');
            $("#slug_good").addClass('hidden');
            $("#keyphrase_in_slug_problem").addClass('hidden');
            $("#keyphrase_in_slug_good").addClass('hidden');
            $("#keyphrase_in_slug_improvement").addClass('hidden');

      }

      if(focus_keyphrase == ''){
            $("#keyphrase_in_slug_problem").addClass('hidden');
            $("#keyphrase_in_slug_good").addClass('hidden');
            $("#keyphrase_in_slug_improvement").addClass('hidden');
      }
      
    }

    function checkKeyphraseDensity(focus_keyphrase) {
      
      var content = '';
      var additional_image_content = '';

      var description_with_html = $('.summernote').summernote('code').toLowerCase(); 

      if(description_with_html != '<p><br></p>'){
        content  += $(description_with_html).text()+' ';
      }

      content  += $("input[type='text'].meta_title").val()+' ';
      content  += $("input[type='text'].name").val()+' ';
      content  += $("textarea.meta_description").val()+' ';
      content  += $("input[type='text'].seo_url").val()+' ';
      
      if(thumb_image !=''){
        content  += $("input[type='text'].image_custom_title").val()+' ';
        content  += $("input[type='text'].image_custom_alt").val()+' ';
      }

      if(additional_image != ''){
        $(".additional_image_custom_title").each(function(index){
            var product_image_title = $(this).val();
            additional_image_content += product_image_title +' ';
        });

        $(".additional_image_custom_alt").each(function(index){
            var product_image_alt = $(this).val();
            additional_image_content += product_image_alt +' ';
        });
      }

      content += additional_image_content;

      var all_content    = content.toLowerCase();

      var content_words   = all_content.match(/\S+/g).length;

      var keyphrase_count = 0;
      var position   = 0;

      if(all_content !='' && focus_keyphrase !=''){

        while(true){

            position = all_content.indexOf(focus_keyphrase, position);

            if(position != -1){ 
              keyphrase_count++; 
              position += focus_keyphrase.length;
            }
            else{
              break;
            }
        }

        var keyphrase_density = (keyphrase_count / content_words ) * 100;

        if(keyphrase_density >= 2.5){
          // problem
          $("#keyphrase_over_density_problem").removeClass('hidden');
          $("#keyphrase_low_density_improvement").addClass('hidden');
          $("#keyphrase_density_good").addClass('hidden');
        }else if(keyphrase_density >= 1 && keyphrase_density < 2.5 ){
          // good
          $("#keyphrase_density_good").removeClass('hidden');
          $("#keyphrase_over_density_problem").addClass('hidden');
          $("#keyphrase_low_density_improvement").addClass('hidden');
        }else{
          // improvement
          $("#keyphrase_low_density_improvement").removeClass('hidden');
          $("#keyphrase_density_good").addClass('hidden');
          $("#keyphrase_over_density_problem").addClass('hidden');
        }

      }

    }



    // description
    var description_html = $('.summernote').summernote('code').toLowerCase();

    var intro_start_index = description_html.indexOf('<p');
    var intro_end_index = description_html.indexOf('</p>');
    var description_intro_paragraph = '';
    var description_words = 0;

   
    // description 
    var description = $(description_html).text();

    // description words
    if(description != ''){
      description_words = description.match(/\S+/g).length;
      $("#description_words").text(description_words);
    }else{
      $("#description_words").text(0);
    }
    
     
    // description on change
    $(".summernote").on('summernote.change', function() {

      description_html = $('.summernote').summernote('code').toLowerCase();

      description      = $(description_html).text();

      // description words
      if(description != ''){
        description_words = description.match(/\S+/g).length;
        $("#description_words").text(description_words);
      }else{
        $("#description_words").text(0);
      }

      intro_start_index = description_html.indexOf('<p');
      intro_end_index = description_html.indexOf('</p>');


      productDescription(description_words, description);

      keyphraseInIntro(description_html, description, focus_keyphrase, intro_start_index, intro_end_index);
      
      checkSubHeadings(description_html);

      paragraphLength(description_html, description_words);

      improvementSentencesRatio(description_html);

      headingTags(description_html, focus_keyphrase);
      
      subHeadingTags(description_html, focus_keyphrase);

      transitionWords(description);

      checkLinks(description_html);

      checkKeyphraseDensity(focus_keyphrase);

      countMessageItems();

    });


    // image
    var thumb_image =  $("#input-image").val();
    
    // image title, alt
    var image_custom_title ='';
    var image_custom_alt ='';

    if(thumb_image != ''){
      
        image_custom_title = $("input[type='text'].image_custom_title").val();
        image_custom_alt   = $("input[type='text'].image_custom_alt").val();

        imageAttributes(image_custom_title,image_custom_alt, focus_keyphrase);

    }else{
        $("#no_image_problem").removeClass('hidden');
        $("#image_title_improvement").addClass('hidden');
        $("#no_image_title_improvement").addClass('hidden');
        $("#image_title_good").addClass('hidden');
        $("#image_alt_improvement").addClass('hidden');
        $("#no_image_alt_improvement").addClass('hidden');
        $("#image_alt_good").addClass('hidden');
    }


    // image on change
    $(document).on('change','#input-image',function(){

      thumb_image = $(this).val();

      image_custom_title = $("input[type='text'].image_custom_title").val();
      image_custom_alt   = $("input[type='text'].image_custom_alt").val();

      imageAttributes(image_custom_title,image_custom_alt, focus_keyphrase);

    });

    // image title on change
    $("input[type='text'].image_custom_title").on('keyup', function(){
       
      image_custom_title = $(this).val();

      imageAttributes(image_custom_title,image_custom_alt, focus_keyphrase);
      
      checkKeyphraseDensity(focus_keyphrase);
      
      countMessageItems();

    });

    // image alt on change
    $("input[type='text'].image_custom_alt").on('keyup', function(){
       
      image_custom_alt = $(this).val();

      imageAttributes(image_custom_title,image_custom_alt, focus_keyphrase);
      
      checkKeyphraseDensity(focus_keyphrase);
      
      countMessageItems();

    });


    // additional image
    var additional_image = '';
    var additional_image_length =  $(".additional-image").length;

    if(additional_image_length > 0){
        additional_image = $('.additional-image').val();
    }

    // additional image title, alt
    var additional_image_custom_title = '';
    var additional_image_custom_alt   = '';

    if(additional_image != ''){
        
      additional_image_custom_title = $("input[type='text'].additional_image_custom_title").val();
      additional_image_custom_alt   = $("input[type='text'].additional_image_custom_alt").val();

      additionalImageAttributes(additional_image_custom_title, additional_image_custom_alt, focus_keyphrase);

    }else{
        $("#no_additional_image_title_improvement").addClass('hidden');
        $("#no_additional_image_alt_improvement").addClass('hidden');
        $("#additional_image_title_improvement").addClass('hidden');
        $("#additional_image_title_good").addClass('hidden');
        $("#additional_image_alt_improvement").addClass('hidden');
        $("#additional_image_alt_good").addClass('hidden');
    }

    // additional image on change
    $(document).on('change','.additional-image', function(){

      additional_image_length =  $(".additional-image").length;

      if(additional_image_length > 0){
          additional_image = $('.additional-image').val();
      }

      if(additional_image != ''){
        
        additional_image_custom_title = $("input[type='text'].additional_image_custom_title").val();
        additional_image_custom_alt   = $("input[type='text'].additional_image_custom_alt").val();

        additionalImageAttributes(additional_image_custom_title, additional_image_custom_alt, focus_keyphrase);

      }else{
          $("#no_additional_image_title_improvement").addClass('hidden');
          $("#no_additional_image_alt_improvement").addClass('hidden');
          $("#additional_image_title_improvement").addClass('hidden');
          $("#additional_image_title_good").addClass('hidden');
          $("#additional_image_alt_improvement").addClass('hidden');
          $("#additional_image_alt_good").addClass('hidden');
      }

    });

   
    // additional image title on change
    $(document).on('keyup','.additional_image_custom_title', function(){

      additional_image_custom_title = $(this).val();

      additionalImageAttributes(additional_image_custom_title, additional_image_custom_alt, focus_keyphrase);
      
      checkKeyphraseDensity(focus_keyphrase);
      
      countMessageItems();
      
     });

    // additional image alt on change
    $(document).on('keyup','.additional_image_custom_alt', function(){

      additional_image_custom_alt = $(this).val();

      additionalImageAttributes(additional_image_custom_title, additional_image_custom_alt, focus_keyphrase);
      
      checkKeyphraseDensity(focus_keyphrase);
      
      countMessageItems();
     
     });


    // product name
    var name = $("input[type='text'].name").val();

    // product name on change
    $("input[type='text'].name").on('keyup', function(){
        name = $(this).val();
        checkKeyphraseDensity(focus_keyphrase);
    });


         // focus keyphrase items
    // problem items
    var keyphrase_problems_items = 0;
    // improvement items
    var keyphrase_improvements_items = 0;
    // good items
    var keyphrase_good_items = 0;
    var keyphrase_good_total_items = 0;
    // seo score
    var seo_score = 0;

    // readability analysis items
    // problem items
    var readability_problems_items = 0;
    // improvement items
    var readability_improvements_items = 0;
    var readability_improvements_total_items = 0;
    // good items
    var readability_good_items = 0;
    var readability_good_total_items = 0;
    // readability score
    var readability_score = 0;


    function problemItems(){
      // focus keyphrase problem items
      keyphrase_problems_items = $('#keyphrase_problems_list > li').not('.hidden').length;
      $("#keyphrase_problems_items").text(keyphrase_problems_items);
      
      // readability analysis problem items
      readability_problems_items = $('#readability_problems_list > li').not('.hidden').length;
      $("#readability_problems_items").text(readability_problems_items);
    }


    function improvementItems(){
      // focus keyphrase improvements items
      keyphrase_improvements_items = $('#keyphrase_improvements_list > li').not('.hidden').length;
      $("#keyphrase_improvements_items").text(keyphrase_improvements_items);

      // readability improvements items
      readability_improvements_total_items = $('#readability_improvements_list > li').length;
      readability_improvements_items = $('#readability_improvements_list > li').not('.hidden').length;
      $("#readability_improvements_items").text(readability_improvements_items);
    }


    function goodItems(){
      // focus keyphrase good items
      keyphrase_good_total_items = $('#keyphrase_good_list > li').length;
      keyphrase_good_items = $('#keyphrase_good_list > li').not('.hidden').length;
      $("#keyphrase_good_items").text(keyphrase_good_items);

      seo_score = (keyphrase_good_items/keyphrase_good_total_items)*100;
      
      // readability good items
      readability_good_total_items = $('#readability_good_list > li').length;
      readability_good_items = $('#readability_good_list > li').not('.hidden').length;
      $("#readability_good_items").text(readability_good_items);

      // exclude ease_reading_good which is not hidden in default

      if($("#ease_reading_good").not('.hidden')){
        
        readability_good_items = readability_good_items-1;
        readability_good_total_items = readability_good_total_items-1;

      }else{
        readability_good_total_items = readability_good_total_items-1;
      }

      readability_score = (readability_good_items/readability_good_total_items)*100;

      $("input[type='hidden'].seo_score").val(seo_score);
      $("input[type='hidden'].readability_score").val(readability_score);

      // seo score evaluation
      if(seo_score >= 70){ 

          $(".keyphrase_panel").find('i:first').removeClass('text-warning').removeClass('text-danger').addClass('text-success');

      }else if(seo_score >= 50 && seo_score < 70 ){

          $(".keyphrase_panel").find('i:first').removeClass('text-success').removeClass('text-danger').addClass('text-warning');

      }else if(seo_score > 0 && seo_score < 50){

          $(".keyphrase_panel").find('i:first').removeClass('text-success').removeClass('text-warning').addClass('text-danger');

      }
      else{

          $(".keyphrase_panel").find('i:first').removeClass('text-success').removeClass('text-warning').removeClass('text-danger').addClass('text-default');
      } 

      // readability score evaluation
      if(readability_score >= 60){ 

          $(".readability_panel").find('i:first').removeClass('text-warning').removeClass('text-danger').addClass('text-success');

          $("#ease_reading_good").removeClass('hidden');
          $("#ease_reading_improvement").addClass('hidden');
          $("#ease_reading_problem").addClass('hidden');

      }else if(readability_score >= 50 && readability_score < 60 ){

          $(".readability_panel").find('i:first').removeClass('text-success').removeClass('text-danger').addClass('text-warning');

          $("#ease_reading_improvement").removeClass('hidden');
          $("#ease_reading_good").addClass('hidden');
          $("#ease_reading_problem").addClass('hidden');

      }else if(readability_score > 0 && readability_score < 50 ){

          $(".readability_panel").find('i:first').removeClass('text-success').removeClass('text-warning').addClass('text-danger');

          $("#ease_reading_problem").removeClass('hidden');
          $("#ease_reading_improvement").addClass('hidden');
          $("#ease_reading_good").addClass('hidden');

      }else{

          $(".readability_panel").find('i:first').removeClass('text-success').removeClass('text-warning').removeClass('text-danger').addClass('text-default');

          $("#ease_reading_problem").addClass('hidden');
          $("#ease_reading_improvement").addClass('hidden');
          $("#ease_reading_good").addClass('hidden');
      }

      // again readability good items for included ease_reading_good item  
      readability_good_items = $('#readability_good_list > li').not('.hidden').length;
      $("#readability_good_items").text(readability_good_items);

    }

    function countMessageItems(){
      goodItems();
      problemItems();
      improvementItems();
    }


    $(document).ready(function() {

        focusKeyPhrase(focus_keyphrase, focus_keyphrase_words);

        checkPreviousKeyphrases(focus_keyphrase);

        metaTitleWidth(meta_title_width);

        metaTitleKeyphrase(meta_title, focus_keyphrase);

        metaDescriptionLength(meta_description_chars);

        metaDescriptionKeyphrase(meta_description, focus_keyphrase);

        productDescription(description_words, description);

        keyphraseInIntro(description_html, description, focus_keyphrase, intro_start_index, intro_end_index);

        paragraphLength(description_html, description_words);

        checkSubHeadings(description_html); // for readability

        headingTags(description_html, focus_keyphrase);

        subHeadingTags(description_html, focus_keyphrase);

        transitionWords(description);

        improvementSentencesRatio(description_html);

        checkLinks(description_html);

        checkKeyphraseDensity(focus_keyphrase);

        countMessageItems();

    });



</script>
<style type="text/css">
  .note-editor.note-frame .note-editing-area .note-editable {
    height: 300px;
  }
</style>

</div>
{{ footer }} 
